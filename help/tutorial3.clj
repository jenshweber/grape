;; gorilla-repl.fileformat = 1

;; **
;;; # Tutorial (Part 3) - Units
;;; 
;;; ![logo](https://raw.githubusercontent.com/jenshweber/grape/master/resources/gv-logo.png)
;;; 
;;; This is part 3 of the _GrapeVine_ tutorial. Part 1 of the tutorial is [here](worksheet.html?filename=help/tutorial.clj) (live version). Part 2 of the the tutorial is [here](worksheet.html?filename=help/tutorial2.clj).
;;; 
;;; Part 3 covers units (similar to the idea of a sub-program or sub-routine in conventional programming) in GrapeVine. 
;;; 
;; **

;; @@
(ns energized-valley
  (:require [grape.core :refer :all]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; ## Running Example
;;; 
;;; For this part of the tutorial, imagine we are the owners of a pizzeria. We will create graph transformation rules that describe induvidual operations our pizza cooks will perform to make a pizza. Then, we will define "units" that compose these operations to make specific types of pizza; i.e., each unit defines a receipe for a pizza on our pizzeria's menu.
;; **

;; **
;;; Let's start by making a few simple rules that we will use later to make our units. These are normal GrapeVine rules.
;;; 
;;; Each pizza we make will be associated with an order is uniquely identified by an Order ID (`oid`). This helps us keep track of which pizza's have been made.
;; **

;; @@
(rule crust [oid] 
      (create (node n:Crust {:order "&oid"})))

(rule add-topping [oid T] 
      (read 
       (node c:Crust {:order "&oid"})
       (NAC (node tx:Topping {:kind "'&T'"})
            (edge ex:has c tx)))
      (create 
       (node t:Topping {:kind "'&T'"})
       (edge :has c t)
       )
      )

(rule remove-topping [oid] 
      (read 
       (node t:Topping)
       (node c:Crust {:order "&oid"})
       (edge e:has c t))
	  (delete t e))

(rule delete-pizza [oid] 
      (read
       (node c:Crust {:order "&oid"})
       (NAC 
        (node tx:Topping)
        (edge :has c tx)))
      (delete c))
;; @@
;; =>
;;; {"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"172pt\" height=\"204pt\"\n viewBox=\"0.00 0.00 172.00 204.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 200)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-200 168,-200 168,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"8,-8 8,-188 156,-188 156,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"82\" y=\"-170.7\" font-family=\"Times,serif\" font-size=\"14.00\">Rule: delete&#45;pizza [oid] </text>\n</g>\n<!-- c -->\n<g id=\"node1\" class=\"node\">\n<title>c</title>\n<polygon fill=\"none\" stroke=\"red\" points=\"47,-106 47,-155 117,-155 117,-106 47,-106\"/>\n<text text-anchor=\"middle\" x=\"82\" y=\"-137.7\" font-family=\"Times,serif\" font-size=\"14.00\">c:Crust</text>\n<polyline fill=\"none\" stroke=\"red\" points=\"47,-130.5 117,-130.5\"/>\n<text text-anchor=\"middle\" x=\"82\" y=\"-113.2\" font-family=\"Times,serif\" font-size=\"14.00\">order=oid</text>\n</g>\n<!-- tx -->\n<g id=\"node2\" class=\"node\">\n<title>tx</title>\n<polygon fill=\"violet\" stroke=\"darkviolet\" points=\"44,-16.5 44,-52.5 120,-52.5 120,-16.5 44,-16.5\"/>\n<text text-anchor=\"middle\" x=\"82\" y=\"-29.7\" font-family=\"Times,serif\" font-size=\"14.00\">tx:Topping</text>\n</g>\n<!-- c&#45;&gt;tx -->\n<g id=\"edge1\" class=\"edge\">\n<title>c&#45;&gt;tx</title>\n<path fill=\"none\" stroke=\"darkviolet\" d=\"M82,-106.26C82,-92.92 82,-76.11 82,-62.22\"/>\n<polygon fill=\"violet\" stroke=\"darkviolet\" points=\"85.5,-52.77 82,-62.77 78.5,-52.77 85.5,-52.77\"/>\n<text text-anchor=\"middle\" x=\"91\" y=\"-74.2\" font-family=\"Times,serif\" font-size=\"14.00\" fill=\"darkviolet\">has</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"172pt\\\" height=\\\"204pt\\\"\\n viewBox=\\\"0.00 0.00 172.00 204.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 200)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-200 168,-200 168,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"8,-8 8,-188 156,-188 156,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"82\\\" y=\\\"-170.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">Rule: delete&#45;pizza [oid] </text>\\n</g>\\n<!-- c -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>c</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"red\\\" points=\\\"47,-106 47,-155 117,-155 117,-106 47,-106\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"82\\\" y=\\\"-137.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">c:Crust</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"red\\\" points=\\\"47,-130.5 117,-130.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"82\\\" y=\\\"-113.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order=oid</text>\\n</g>\\n<!-- tx -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>tx</title>\\n<polygon fill=\\\"violet\\\" stroke=\\\"darkviolet\\\" points=\\\"44,-16.5 44,-52.5 120,-52.5 120,-16.5 44,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"82\\\" y=\\\"-29.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">tx:Topping</text>\\n</g>\\n<!-- c&#45;&gt;tx -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>c&#45;&gt;tx</title>\\n<path fill=\\\"none\\\" stroke=\\\"darkviolet\\\" d=\\\"M82,-106.26C82,-92.92 82,-76.11 82,-62.22\\\"/>\\n<polygon fill=\\\"violet\\\" stroke=\\\"darkviolet\\\" points=\\\"85.5,-52.77 82,-62.77 78.5,-52.77 85.5,-52.77\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"91\\\" y=\\\"-74.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\" fill=\\\"darkviolet\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"}"}
;; <=

;; **
;;; ## Basic Unit Definition
;;; 
;;; Now let's make our first unit! We will combine the two rules above to make a recipe for a cheese pizza.
;;; 
;;; Each pizza our pizzeria produces has a unique order ID.
;;; 
;;; The syntax for unit definition is similar to rule definition. Provide a name (e.g., `cheese-pizza`), a vector of parameters (e.g., `[oid]` for order id), and then a graph program (`(prog op1 op2 op3 ...)`). 
;;; 
;;; Graph programs are specified as a sequence of GrapeVine rules or control operators that are composed together (in the order they are provided). Under the hood, GrapeVine uses the threading marco to compose these operations. For example, `(prog op1 op2 op3)` becomes `(-> <INPUT_GRAPE> op1 op2 op3)`.
;; **

;; @@
(unit cheese-pizza [oid]
      (prog
       (crust oid) 
       (add-topping oid "cheese")))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;energized-valley/cheese-pizza</span>","value":"#'energized-valley/cheese-pizza"}
;; <=

;; **
;;; Now let's test our unit out. Does it produce the pizza we expect? 
;; **

;; @@
(-> (newgrape) (cheese-pizza 1) view)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"321pt\" height=\"217pt\"\n viewBox=\"0.00 0.00 321.00 217.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 213)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-213 317,-213 317,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" stroke-dasharray=\"1,5\" points=\"8,-8 8,-201 305,-201 305,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"156.5\" y=\"-183.7\" font-family=\"Times,serif\" font-size=\"14.00\">GRAPH: e8b94e82&#45;edc3&#45;4cb3&#45;8cdc&#45;4564827cbdd5</text>\n</g>\n<!-- 77739 -->\n<g id=\"node1\" class=\"node\">\n<title>77739</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M122.12,-119C122.12,-119 189.88,-119 189.88,-119 195.88,-119 201.88,-125 201.88,-131 201.88,-131 201.88,-156 201.88,-156 201.88,-162 195.88,-168 189.88,-168 189.88,-168 122.12,-168 122.12,-168 116.12,-168 110.12,-162 110.12,-156 110.12,-156 110.12,-131 110.12,-131 110.12,-125 116.12,-119 122.12,-119\"/>\n<text text-anchor=\"middle\" x=\"156\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77739)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"110.12,-143.5 201.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"156\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1</text>\n</g>\n<!-- 77741 -->\n<g id=\"node2\" class=\"node\">\n<title>77741</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M113.88,-16.5C113.88,-16.5 198.12,-16.5 198.12,-16.5 204.12,-16.5 210.12,-22.5 210.12,-28.5 210.12,-28.5 210.12,-53.5 210.12,-53.5 210.12,-59.5 204.12,-65.5 198.12,-65.5 198.12,-65.5 113.88,-65.5 113.88,-65.5 107.88,-65.5 101.88,-59.5 101.88,-53.5 101.88,-53.5 101.88,-28.5 101.88,-28.5 101.88,-22.5 107.88,-16.5 113.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"156\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77741)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"101.88,-41 210.12,-41\"/>\n<text text-anchor=\"middle\" x=\"156\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77739&#45;&gt;77741 -->\n<g id=\"edge1\" class=\"edge\">\n<title>77739&#45;&gt;77741</title>\n<path fill=\"none\" stroke=\"black\" d=\"M156,-119.19C156,-106.38 156,-90.25 156,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"159.5,-76.18 156,-66.18 152.5,-76.18 159.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"165\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"321pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 321.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 317,-213 317,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 305,-201 305,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"156.5\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: e8b94e82&#45;edc3&#45;4cb3&#45;8cdc&#45;4564827cbdd5</text>\\n</g>\\n<!-- 77739 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77739</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M122.12,-119C122.12,-119 189.88,-119 189.88,-119 195.88,-119 201.88,-125 201.88,-131 201.88,-131 201.88,-156 201.88,-156 201.88,-162 195.88,-168 189.88,-168 189.88,-168 122.12,-168 122.12,-168 116.12,-168 110.12,-162 110.12,-156 110.12,-156 110.12,-131 110.12,-131 110.12,-125 116.12,-119 122.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"156\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77739)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"110.12,-143.5 201.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"156\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1</text>\\n</g>\\n<!-- 77741 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77741</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M113.88,-16.5C113.88,-16.5 198.12,-16.5 198.12,-16.5 204.12,-16.5 210.12,-22.5 210.12,-28.5 210.12,-28.5 210.12,-53.5 210.12,-53.5 210.12,-59.5 204.12,-65.5 198.12,-65.5 198.12,-65.5 113.88,-65.5 113.88,-65.5 107.88,-65.5 101.88,-59.5 101.88,-53.5 101.88,-53.5 101.88,-28.5 101.88,-28.5 101.88,-22.5 107.88,-16.5 113.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"156\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77741)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"101.88,-41 210.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"156\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77739&#45;&gt;77741 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77739&#45;&gt;77741</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M156,-119.19C156,-106.38 156,-90.25 156,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"159.5,-76.18 156,-66.18 152.5,-76.18 159.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"165\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"}"}],"value":"(#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"321pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 321.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 317,-213 317,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 305,-201 305,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"156.5\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: e8b94e82&#45;edc3&#45;4cb3&#45;8cdc&#45;4564827cbdd5</text>\\n</g>\\n<!-- 77739 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77739</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M122.12,-119C122.12,-119 189.88,-119 189.88,-119 195.88,-119 201.88,-125 201.88,-131 201.88,-131 201.88,-156 201.88,-156 201.88,-162 195.88,-168 189.88,-168 189.88,-168 122.12,-168 122.12,-168 116.12,-168 110.12,-162 110.12,-156 110.12,-156 110.12,-131 110.12,-131 110.12,-125 116.12,-119 122.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"156\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77739)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"110.12,-143.5 201.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"156\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1</text>\\n</g>\\n<!-- 77741 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77741</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M113.88,-16.5C113.88,-16.5 198.12,-16.5 198.12,-16.5 204.12,-16.5 210.12,-22.5 210.12,-28.5 210.12,-28.5 210.12,-53.5 210.12,-53.5 210.12,-59.5 204.12,-65.5 198.12,-65.5 198.12,-65.5 113.88,-65.5 113.88,-65.5 107.88,-65.5 101.88,-59.5 101.88,-53.5 101.88,-53.5 101.88,-28.5 101.88,-28.5 101.88,-22.5 107.88,-16.5 113.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"156\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77741)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"101.88,-41 210.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"156\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77739&#45;&gt;77741 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77739&#45;&gt;77741</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M156,-119.19C156,-106.38 156,-90.25 156,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"159.5,-76.18 156,-66.18 152.5,-76.18 159.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"165\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"})"}
;; <=

;; **
;;; We can also include GrapeVine's control structures in the graph program for a unit. Since our pizzeria is quite busy, it is helpful to have a unit that automatically creates `N` cheese pizzas in one order. We will use GrapeVine's `->n*` operator to perform this operation.
;; **

;; @@
(unit many-cheese-pizzas [N oid]
      (prog (->n* N      
            (crust oid) 
       		(add-topping oid "cheese"))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;energized-valley/many-cheese-pizzas</span>","value":"#'energized-valley/many-cheese-pizzas"}
;; <=

;; @@
(-> (newgrape) (many-cheese-pizzas 3 1234) view)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"400pt\" height=\"217pt\"\n viewBox=\"0.00 0.00 400.00 217.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 213)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-213 396,-213 396,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" stroke-dasharray=\"1,5\" points=\"8,-8 8,-201 384,-201 384,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"196\" y=\"-183.7\" font-family=\"Times,serif\" font-size=\"14.00\">GRAPH: 2428f3c2&#45;2413&#45;4b48&#45;abf0&#45;b02800ad630d</text>\n</g>\n<!-- 77745 -->\n<g id=\"node1\" class=\"node\">\n<title>77745</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M288.12,-119C288.12,-119 355.88,-119 355.88,-119 361.88,-119 367.88,-125 367.88,-131 367.88,-131 367.88,-156 367.88,-156 367.88,-162 361.88,-168 355.88,-168 355.88,-168 288.12,-168 288.12,-168 282.12,-168 276.12,-162 276.12,-156 276.12,-156 276.12,-131 276.12,-131 276.12,-125 282.12,-119 288.12,-119\"/>\n<text text-anchor=\"middle\" x=\"322\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77745)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"276.12,-143.5 367.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"322\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1234</text>\n</g>\n<!-- 77747 -->\n<g id=\"node2\" class=\"node\">\n<title>77747</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M279.88,-16.5C279.88,-16.5 364.12,-16.5 364.12,-16.5 370.12,-16.5 376.12,-22.5 376.12,-28.5 376.12,-28.5 376.12,-53.5 376.12,-53.5 376.12,-59.5 370.12,-65.5 364.12,-65.5 364.12,-65.5 279.88,-65.5 279.88,-65.5 273.88,-65.5 267.88,-59.5 267.88,-53.5 267.88,-53.5 267.88,-28.5 267.88,-28.5 267.88,-22.5 273.88,-16.5 279.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"322\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77747)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"267.88,-41 376.12,-41\"/>\n<text text-anchor=\"middle\" x=\"322\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77745&#45;&gt;77747 -->\n<g id=\"edge1\" class=\"edge\">\n<title>77745&#45;&gt;77747</title>\n<path fill=\"none\" stroke=\"black\" d=\"M322,-119.19C322,-106.38 322,-90.25 322,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"325.5,-76.18 322,-66.18 318.5,-76.18 325.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"331\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n<!-- 77750 -->\n<g id=\"node3\" class=\"node\">\n<title>77750</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M162.12,-119C162.12,-119 229.88,-119 229.88,-119 235.88,-119 241.88,-125 241.88,-131 241.88,-131 241.88,-156 241.88,-156 241.88,-162 235.88,-168 229.88,-168 229.88,-168 162.12,-168 162.12,-168 156.12,-168 150.12,-162 150.12,-156 150.12,-156 150.12,-131 150.12,-131 150.12,-125 156.12,-119 162.12,-119\"/>\n<text text-anchor=\"middle\" x=\"196\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77750)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"150.12,-143.5 241.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"196\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1234</text>\n</g>\n<!-- 77752 -->\n<g id=\"node4\" class=\"node\">\n<title>77752</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M153.88,-16.5C153.88,-16.5 238.12,-16.5 238.12,-16.5 244.12,-16.5 250.12,-22.5 250.12,-28.5 250.12,-28.5 250.12,-53.5 250.12,-53.5 250.12,-59.5 244.12,-65.5 238.12,-65.5 238.12,-65.5 153.88,-65.5 153.88,-65.5 147.88,-65.5 141.88,-59.5 141.88,-53.5 141.88,-53.5 141.88,-28.5 141.88,-28.5 141.88,-22.5 147.88,-16.5 153.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"196\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77752)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"141.88,-41 250.12,-41\"/>\n<text text-anchor=\"middle\" x=\"196\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77750&#45;&gt;77752 -->\n<g id=\"edge2\" class=\"edge\">\n<title>77750&#45;&gt;77752</title>\n<path fill=\"none\" stroke=\"black\" d=\"M196,-119.19C196,-106.38 196,-90.25 196,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"199.5,-76.18 196,-66.18 192.5,-76.18 199.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"205\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n<!-- 77755 -->\n<g id=\"node5\" class=\"node\">\n<title>77755</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M36.12,-119C36.12,-119 103.88,-119 103.88,-119 109.88,-119 115.88,-125 115.88,-131 115.88,-131 115.88,-156 115.88,-156 115.88,-162 109.88,-168 103.88,-168 103.88,-168 36.12,-168 36.12,-168 30.12,-168 24.12,-162 24.12,-156 24.12,-156 24.12,-131 24.12,-131 24.12,-125 30.12,-119 36.12,-119\"/>\n<text text-anchor=\"middle\" x=\"70\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77755)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"24.12,-143.5 115.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"70\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1234</text>\n</g>\n<!-- 77757 -->\n<g id=\"node6\" class=\"node\">\n<title>77757</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M27.88,-16.5C27.88,-16.5 112.12,-16.5 112.12,-16.5 118.12,-16.5 124.12,-22.5 124.12,-28.5 124.12,-28.5 124.12,-53.5 124.12,-53.5 124.12,-59.5 118.12,-65.5 112.12,-65.5 112.12,-65.5 27.88,-65.5 27.88,-65.5 21.88,-65.5 15.88,-59.5 15.88,-53.5 15.88,-53.5 15.88,-28.5 15.88,-28.5 15.88,-22.5 21.88,-16.5 27.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"70\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77757)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"15.88,-41 124.12,-41\"/>\n<text text-anchor=\"middle\" x=\"70\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77755&#45;&gt;77757 -->\n<g id=\"edge3\" class=\"edge\">\n<title>77755&#45;&gt;77757</title>\n<path fill=\"none\" stroke=\"black\" d=\"M70,-119.19C70,-106.38 70,-90.25 70,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"73.5,-76.18 70,-66.18 66.5,-76.18 73.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"79\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"400pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 400.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 396,-213 396,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 384,-201 384,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"196\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: 2428f3c2&#45;2413&#45;4b48&#45;abf0&#45;b02800ad630d</text>\\n</g>\\n<!-- 77745 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77745</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M288.12,-119C288.12,-119 355.88,-119 355.88,-119 361.88,-119 367.88,-125 367.88,-131 367.88,-131 367.88,-156 367.88,-156 367.88,-162 361.88,-168 355.88,-168 355.88,-168 288.12,-168 288.12,-168 282.12,-168 276.12,-162 276.12,-156 276.12,-156 276.12,-131 276.12,-131 276.12,-125 282.12,-119 288.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"322\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77745)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"276.12,-143.5 367.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"322\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1234</text>\\n</g>\\n<!-- 77747 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77747</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M279.88,-16.5C279.88,-16.5 364.12,-16.5 364.12,-16.5 370.12,-16.5 376.12,-22.5 376.12,-28.5 376.12,-28.5 376.12,-53.5 376.12,-53.5 376.12,-59.5 370.12,-65.5 364.12,-65.5 364.12,-65.5 279.88,-65.5 279.88,-65.5 273.88,-65.5 267.88,-59.5 267.88,-53.5 267.88,-53.5 267.88,-28.5 267.88,-28.5 267.88,-22.5 273.88,-16.5 279.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"322\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77747)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"267.88,-41 376.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"322\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77745&#45;&gt;77747 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77745&#45;&gt;77747</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M322,-119.19C322,-106.38 322,-90.25 322,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"325.5,-76.18 322,-66.18 318.5,-76.18 325.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"331\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77750 -->\\n<g id=\\\"node3\\\" class=\\\"node\\\">\\n<title>77750</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M162.12,-119C162.12,-119 229.88,-119 229.88,-119 235.88,-119 241.88,-125 241.88,-131 241.88,-131 241.88,-156 241.88,-156 241.88,-162 235.88,-168 229.88,-168 229.88,-168 162.12,-168 162.12,-168 156.12,-168 150.12,-162 150.12,-156 150.12,-156 150.12,-131 150.12,-131 150.12,-125 156.12,-119 162.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"196\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77750)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"150.12,-143.5 241.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"196\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1234</text>\\n</g>\\n<!-- 77752 -->\\n<g id=\\\"node4\\\" class=\\\"node\\\">\\n<title>77752</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M153.88,-16.5C153.88,-16.5 238.12,-16.5 238.12,-16.5 244.12,-16.5 250.12,-22.5 250.12,-28.5 250.12,-28.5 250.12,-53.5 250.12,-53.5 250.12,-59.5 244.12,-65.5 238.12,-65.5 238.12,-65.5 153.88,-65.5 153.88,-65.5 147.88,-65.5 141.88,-59.5 141.88,-53.5 141.88,-53.5 141.88,-28.5 141.88,-28.5 141.88,-22.5 147.88,-16.5 153.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"196\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77752)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"141.88,-41 250.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"196\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77750&#45;&gt;77752 -->\\n<g id=\\\"edge2\\\" class=\\\"edge\\\">\\n<title>77750&#45;&gt;77752</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M196,-119.19C196,-106.38 196,-90.25 196,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"199.5,-76.18 196,-66.18 192.5,-76.18 199.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"205\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77755 -->\\n<g id=\\\"node5\\\" class=\\\"node\\\">\\n<title>77755</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M36.12,-119C36.12,-119 103.88,-119 103.88,-119 109.88,-119 115.88,-125 115.88,-131 115.88,-131 115.88,-156 115.88,-156 115.88,-162 109.88,-168 103.88,-168 103.88,-168 36.12,-168 36.12,-168 30.12,-168 24.12,-162 24.12,-156 24.12,-156 24.12,-131 24.12,-131 24.12,-125 30.12,-119 36.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77755)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"24.12,-143.5 115.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1234</text>\\n</g>\\n<!-- 77757 -->\\n<g id=\\\"node6\\\" class=\\\"node\\\">\\n<title>77757</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M27.88,-16.5C27.88,-16.5 112.12,-16.5 112.12,-16.5 118.12,-16.5 124.12,-22.5 124.12,-28.5 124.12,-28.5 124.12,-53.5 124.12,-53.5 124.12,-59.5 118.12,-65.5 112.12,-65.5 112.12,-65.5 27.88,-65.5 27.88,-65.5 21.88,-65.5 15.88,-59.5 15.88,-53.5 15.88,-53.5 15.88,-28.5 15.88,-28.5 15.88,-22.5 21.88,-16.5 27.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77757)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"15.88,-41 124.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77755&#45;&gt;77757 -->\\n<g id=\\\"edge3\\\" class=\\\"edge\\\">\\n<title>77755&#45;&gt;77757</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M70,-119.19C70,-106.38 70,-90.25 70,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"73.5,-76.18 70,-66.18 66.5,-76.18 73.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"79\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"}"}],"value":"(#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"400pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 400.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 396,-213 396,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 384,-201 384,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"196\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: 2428f3c2&#45;2413&#45;4b48&#45;abf0&#45;b02800ad630d</text>\\n</g>\\n<!-- 77745 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77745</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M288.12,-119C288.12,-119 355.88,-119 355.88,-119 361.88,-119 367.88,-125 367.88,-131 367.88,-131 367.88,-156 367.88,-156 367.88,-162 361.88,-168 355.88,-168 355.88,-168 288.12,-168 288.12,-168 282.12,-168 276.12,-162 276.12,-156 276.12,-156 276.12,-131 276.12,-131 276.12,-125 282.12,-119 288.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"322\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77745)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"276.12,-143.5 367.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"322\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1234</text>\\n</g>\\n<!-- 77747 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77747</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M279.88,-16.5C279.88,-16.5 364.12,-16.5 364.12,-16.5 370.12,-16.5 376.12,-22.5 376.12,-28.5 376.12,-28.5 376.12,-53.5 376.12,-53.5 376.12,-59.5 370.12,-65.5 364.12,-65.5 364.12,-65.5 279.88,-65.5 279.88,-65.5 273.88,-65.5 267.88,-59.5 267.88,-53.5 267.88,-53.5 267.88,-28.5 267.88,-28.5 267.88,-22.5 273.88,-16.5 279.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"322\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77747)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"267.88,-41 376.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"322\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77745&#45;&gt;77747 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77745&#45;&gt;77747</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M322,-119.19C322,-106.38 322,-90.25 322,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"325.5,-76.18 322,-66.18 318.5,-76.18 325.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"331\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77750 -->\\n<g id=\\\"node3\\\" class=\\\"node\\\">\\n<title>77750</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M162.12,-119C162.12,-119 229.88,-119 229.88,-119 235.88,-119 241.88,-125 241.88,-131 241.88,-131 241.88,-156 241.88,-156 241.88,-162 235.88,-168 229.88,-168 229.88,-168 162.12,-168 162.12,-168 156.12,-168 150.12,-162 150.12,-156 150.12,-156 150.12,-131 150.12,-131 150.12,-125 156.12,-119 162.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"196\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77750)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"150.12,-143.5 241.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"196\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1234</text>\\n</g>\\n<!-- 77752 -->\\n<g id=\\\"node4\\\" class=\\\"node\\\">\\n<title>77752</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M153.88,-16.5C153.88,-16.5 238.12,-16.5 238.12,-16.5 244.12,-16.5 250.12,-22.5 250.12,-28.5 250.12,-28.5 250.12,-53.5 250.12,-53.5 250.12,-59.5 244.12,-65.5 238.12,-65.5 238.12,-65.5 153.88,-65.5 153.88,-65.5 147.88,-65.5 141.88,-59.5 141.88,-53.5 141.88,-53.5 141.88,-28.5 141.88,-28.5 141.88,-22.5 147.88,-16.5 153.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"196\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77752)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"141.88,-41 250.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"196\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77750&#45;&gt;77752 -->\\n<g id=\\\"edge2\\\" class=\\\"edge\\\">\\n<title>77750&#45;&gt;77752</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M196,-119.19C196,-106.38 196,-90.25 196,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"199.5,-76.18 196,-66.18 192.5,-76.18 199.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"205\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77755 -->\\n<g id=\\\"node5\\\" class=\\\"node\\\">\\n<title>77755</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M36.12,-119C36.12,-119 103.88,-119 103.88,-119 109.88,-119 115.88,-125 115.88,-131 115.88,-131 115.88,-156 115.88,-156 115.88,-162 109.88,-168 103.88,-168 103.88,-168 36.12,-168 36.12,-168 30.12,-168 24.12,-162 24.12,-156 24.12,-156 24.12,-131 24.12,-131 24.12,-125 30.12,-119 36.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77755)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"24.12,-143.5 115.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1234</text>\\n</g>\\n<!-- 77757 -->\\n<g id=\\\"node6\\\" class=\\\"node\\\">\\n<title>77757</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M27.88,-16.5C27.88,-16.5 112.12,-16.5 112.12,-16.5 118.12,-16.5 124.12,-22.5 124.12,-28.5 124.12,-28.5 124.12,-53.5 124.12,-53.5 124.12,-59.5 118.12,-65.5 112.12,-65.5 112.12,-65.5 27.88,-65.5 27.88,-65.5 21.88,-65.5 15.88,-59.5 15.88,-53.5 15.88,-53.5 15.88,-28.5 15.88,-28.5 15.88,-22.5 21.88,-16.5 27.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77757)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"15.88,-41 124.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77755&#45;&gt;77757 -->\\n<g id=\\\"edge3\\\" class=\\\"edge\\\">\\n<title>77755&#45;&gt;77757</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M70,-119.19C70,-106.38 70,-90.25 70,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"73.5,-76.18 70,-66.18 66.5,-76.18 73.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"79\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"})"}
;; <=

;; **
;;; ## Unit Composition
;;; 
;;; We can also compose units together. So, we can make a veggie pizza by adding veggie toppings to an existing cheese pizza.
;; **

;; @@
(unit veggie-pizza [oid]
      (prog 
       (cheese-pizza oid)
       (add-topping oid "green pepper")
       (add-topping oid "mushroom")))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;energized-valley/veggie-pizza</span>","value":"#'energized-valley/veggie-pizza"}
;; <=

;; @@
(-> (newgrape) (veggie-pizza 1) view)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"418pt\" height=\"217pt\"\n viewBox=\"0.00 0.00 418.00 217.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 213)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-213 414,-213 414,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" stroke-dasharray=\"1,5\" points=\"8,-8 8,-201 402,-201 402,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"205\" y=\"-183.7\" font-family=\"Times,serif\" font-size=\"14.00\">GRAPH: 80f25dc5&#45;a07e&#45;402c&#45;aca7&#45;39ca556f0354</text>\n</g>\n<!-- 77761 -->\n<g id=\"node1\" class=\"node\">\n<title>77761</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M169.12,-119C169.12,-119 236.88,-119 236.88,-119 242.88,-119 248.88,-125 248.88,-131 248.88,-131 248.88,-156 248.88,-156 248.88,-162 242.88,-168 236.88,-168 236.88,-168 169.12,-168 169.12,-168 163.12,-168 157.12,-162 157.12,-156 157.12,-156 157.12,-131 157.12,-131 157.12,-125 163.12,-119 169.12,-119\"/>\n<text text-anchor=\"middle\" x=\"203\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77761)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"157.12,-143.5 248.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"203\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1</text>\n</g>\n<!-- 77763 -->\n<g id=\"node2\" class=\"node\">\n<title>77763</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M27.88,-16.5C27.88,-16.5 112.12,-16.5 112.12,-16.5 118.12,-16.5 124.12,-22.5 124.12,-28.5 124.12,-28.5 124.12,-53.5 124.12,-53.5 124.12,-59.5 118.12,-65.5 112.12,-65.5 112.12,-65.5 27.88,-65.5 27.88,-65.5 21.88,-65.5 15.88,-59.5 15.88,-53.5 15.88,-53.5 15.88,-28.5 15.88,-28.5 15.88,-22.5 21.88,-16.5 27.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"70\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77763)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"15.88,-41 124.12,-41\"/>\n<text text-anchor=\"middle\" x=\"70\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77761&#45;&gt;77763 -->\n<g id=\"edge1\" class=\"edge\">\n<title>77761&#45;&gt;77763</title>\n<path fill=\"none\" stroke=\"black\" d=\"M172.15,-119.19C153.44,-105.05 129.37,-86.86 109.3,-71.7\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"111.77,-68.42 101.68,-65.18 107.55,-74 111.77,-68.42\"/>\n<text text-anchor=\"middle\" x=\"153\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n<!-- 77766 -->\n<g id=\"node3\" class=\"node\">\n<title>77766</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M153.75,-16.5C153.75,-16.5 252.25,-16.5 252.25,-16.5 258.25,-16.5 264.25,-22.5 264.25,-28.5 264.25,-28.5 264.25,-53.5 264.25,-53.5 264.25,-59.5 258.25,-65.5 252.25,-65.5 252.25,-65.5 153.75,-65.5 153.75,-65.5 147.75,-65.5 141.75,-59.5 141.75,-53.5 141.75,-53.5 141.75,-28.5 141.75,-28.5 141.75,-22.5 147.75,-16.5 153.75,-16.5\"/>\n<text text-anchor=\"middle\" x=\"203\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77766)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"141.75,-41 264.25,-41\"/>\n<text text-anchor=\"middle\" x=\"203\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;green pepper&#39;</text>\n</g>\n<!-- 77761&#45;&gt;77766 -->\n<g id=\"edge2\" class=\"edge\">\n<title>77761&#45;&gt;77766</title>\n<path fill=\"none\" stroke=\"black\" d=\"M203,-119.19C203,-106.38 203,-90.25 203,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"206.5,-76.18 203,-66.18 199.5,-76.18 206.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"212\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n<!-- 77769 -->\n<g id=\"node4\" class=\"node\">\n<title>77769</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M294.38,-16.5C294.38,-16.5 381.62,-16.5 381.62,-16.5 387.62,-16.5 393.62,-22.5 393.62,-28.5 393.62,-28.5 393.62,-53.5 393.62,-53.5 393.62,-59.5 387.62,-65.5 381.62,-65.5 381.62,-65.5 294.38,-65.5 294.38,-65.5 288.38,-65.5 282.38,-59.5 282.38,-53.5 282.38,-53.5 282.38,-28.5 282.38,-28.5 282.38,-22.5 288.38,-16.5 294.38,-16.5\"/>\n<text text-anchor=\"middle\" x=\"338\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77769)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"282.38,-41 393.62,-41\"/>\n<text text-anchor=\"middle\" x=\"338\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;mushroom&#39;</text>\n</g>\n<!-- 77761&#45;&gt;77769 -->\n<g id=\"edge3\" class=\"edge\">\n<title>77761&#45;&gt;77769</title>\n<path fill=\"none\" stroke=\"black\" d=\"M234.31,-119.19C253.31,-105.05 277.74,-86.86 298.11,-71.7\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"299.93,-73.96 305.86,-65.18 295.75,-68.35 299.93,-73.96\"/>\n<text text-anchor=\"middle\" x=\"287\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"418pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 418.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 414,-213 414,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 402,-201 402,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"205\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: 80f25dc5&#45;a07e&#45;402c&#45;aca7&#45;39ca556f0354</text>\\n</g>\\n<!-- 77761 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77761</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M169.12,-119C169.12,-119 236.88,-119 236.88,-119 242.88,-119 248.88,-125 248.88,-131 248.88,-131 248.88,-156 248.88,-156 248.88,-162 242.88,-168 236.88,-168 236.88,-168 169.12,-168 169.12,-168 163.12,-168 157.12,-162 157.12,-156 157.12,-156 157.12,-131 157.12,-131 157.12,-125 163.12,-119 169.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"203\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77761)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"157.12,-143.5 248.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"203\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1</text>\\n</g>\\n<!-- 77763 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77763</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M27.88,-16.5C27.88,-16.5 112.12,-16.5 112.12,-16.5 118.12,-16.5 124.12,-22.5 124.12,-28.5 124.12,-28.5 124.12,-53.5 124.12,-53.5 124.12,-59.5 118.12,-65.5 112.12,-65.5 112.12,-65.5 27.88,-65.5 27.88,-65.5 21.88,-65.5 15.88,-59.5 15.88,-53.5 15.88,-53.5 15.88,-28.5 15.88,-28.5 15.88,-22.5 21.88,-16.5 27.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77763)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"15.88,-41 124.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77761&#45;&gt;77763 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77761&#45;&gt;77763</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M172.15,-119.19C153.44,-105.05 129.37,-86.86 109.3,-71.7\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"111.77,-68.42 101.68,-65.18 107.55,-74 111.77,-68.42\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"153\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77766 -->\\n<g id=\\\"node3\\\" class=\\\"node\\\">\\n<title>77766</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M153.75,-16.5C153.75,-16.5 252.25,-16.5 252.25,-16.5 258.25,-16.5 264.25,-22.5 264.25,-28.5 264.25,-28.5 264.25,-53.5 264.25,-53.5 264.25,-59.5 258.25,-65.5 252.25,-65.5 252.25,-65.5 153.75,-65.5 153.75,-65.5 147.75,-65.5 141.75,-59.5 141.75,-53.5 141.75,-53.5 141.75,-28.5 141.75,-28.5 141.75,-22.5 147.75,-16.5 153.75,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"203\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77766)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"141.75,-41 264.25,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"203\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;green pepper&#39;</text>\\n</g>\\n<!-- 77761&#45;&gt;77766 -->\\n<g id=\\\"edge2\\\" class=\\\"edge\\\">\\n<title>77761&#45;&gt;77766</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M203,-119.19C203,-106.38 203,-90.25 203,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"206.5,-76.18 203,-66.18 199.5,-76.18 206.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"212\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77769 -->\\n<g id=\\\"node4\\\" class=\\\"node\\\">\\n<title>77769</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M294.38,-16.5C294.38,-16.5 381.62,-16.5 381.62,-16.5 387.62,-16.5 393.62,-22.5 393.62,-28.5 393.62,-28.5 393.62,-53.5 393.62,-53.5 393.62,-59.5 387.62,-65.5 381.62,-65.5 381.62,-65.5 294.38,-65.5 294.38,-65.5 288.38,-65.5 282.38,-59.5 282.38,-53.5 282.38,-53.5 282.38,-28.5 282.38,-28.5 282.38,-22.5 288.38,-16.5 294.38,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"338\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77769)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"282.38,-41 393.62,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"338\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;mushroom&#39;</text>\\n</g>\\n<!-- 77761&#45;&gt;77769 -->\\n<g id=\\\"edge3\\\" class=\\\"edge\\\">\\n<title>77761&#45;&gt;77769</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M234.31,-119.19C253.31,-105.05 277.74,-86.86 298.11,-71.7\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"299.93,-73.96 305.86,-65.18 295.75,-68.35 299.93,-73.96\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"287\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"}"}],"value":"(#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"418pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 418.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 414,-213 414,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 402,-201 402,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"205\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: 80f25dc5&#45;a07e&#45;402c&#45;aca7&#45;39ca556f0354</text>\\n</g>\\n<!-- 77761 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77761</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M169.12,-119C169.12,-119 236.88,-119 236.88,-119 242.88,-119 248.88,-125 248.88,-131 248.88,-131 248.88,-156 248.88,-156 248.88,-162 242.88,-168 236.88,-168 236.88,-168 169.12,-168 169.12,-168 163.12,-168 157.12,-162 157.12,-156 157.12,-156 157.12,-131 157.12,-131 157.12,-125 163.12,-119 169.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"203\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77761)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"157.12,-143.5 248.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"203\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1</text>\\n</g>\\n<!-- 77763 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77763</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M27.88,-16.5C27.88,-16.5 112.12,-16.5 112.12,-16.5 118.12,-16.5 124.12,-22.5 124.12,-28.5 124.12,-28.5 124.12,-53.5 124.12,-53.5 124.12,-59.5 118.12,-65.5 112.12,-65.5 112.12,-65.5 27.88,-65.5 27.88,-65.5 21.88,-65.5 15.88,-59.5 15.88,-53.5 15.88,-53.5 15.88,-28.5 15.88,-28.5 15.88,-22.5 21.88,-16.5 27.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77763)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"15.88,-41 124.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77761&#45;&gt;77763 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77761&#45;&gt;77763</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M172.15,-119.19C153.44,-105.05 129.37,-86.86 109.3,-71.7\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"111.77,-68.42 101.68,-65.18 107.55,-74 111.77,-68.42\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"153\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77766 -->\\n<g id=\\\"node3\\\" class=\\\"node\\\">\\n<title>77766</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M153.75,-16.5C153.75,-16.5 252.25,-16.5 252.25,-16.5 258.25,-16.5 264.25,-22.5 264.25,-28.5 264.25,-28.5 264.25,-53.5 264.25,-53.5 264.25,-59.5 258.25,-65.5 252.25,-65.5 252.25,-65.5 153.75,-65.5 153.75,-65.5 147.75,-65.5 141.75,-59.5 141.75,-53.5 141.75,-53.5 141.75,-28.5 141.75,-28.5 141.75,-22.5 147.75,-16.5 153.75,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"203\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77766)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"141.75,-41 264.25,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"203\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;green pepper&#39;</text>\\n</g>\\n<!-- 77761&#45;&gt;77766 -->\\n<g id=\\\"edge2\\\" class=\\\"edge\\\">\\n<title>77761&#45;&gt;77766</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M203,-119.19C203,-106.38 203,-90.25 203,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"206.5,-76.18 203,-66.18 199.5,-76.18 206.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"212\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77769 -->\\n<g id=\\\"node4\\\" class=\\\"node\\\">\\n<title>77769</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M294.38,-16.5C294.38,-16.5 381.62,-16.5 381.62,-16.5 387.62,-16.5 393.62,-22.5 393.62,-28.5 393.62,-28.5 393.62,-53.5 393.62,-53.5 393.62,-59.5 387.62,-65.5 381.62,-65.5 381.62,-65.5 294.38,-65.5 294.38,-65.5 288.38,-65.5 282.38,-59.5 282.38,-53.5 282.38,-53.5 282.38,-28.5 282.38,-28.5 282.38,-22.5 288.38,-16.5 294.38,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"338\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77769)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"282.38,-41 393.62,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"338\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;mushroom&#39;</text>\\n</g>\\n<!-- 77761&#45;&gt;77769 -->\\n<g id=\\\"edge3\\\" class=\\\"edge\\\">\\n<title>77761&#45;&gt;77769</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M234.31,-119.19C253.31,-105.05 277.74,-86.86 298.11,-71.7\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"299.93,-73.96 305.86,-65.18 295.75,-68.35 299.93,-73.96\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"287\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"})"}
;; <=

;; **
;;; ## Design by Contract
;;; 
;;; The notion of "design by contract" is well-established in software engineering. In this paradigm, a unit of execution is assigned "pre-conditions" and "post-conditions". If the pre-conditions are satisifed before the main program of the unit is executed, then the main program is both guarenteed to terminate and ensures the post-condition(s) are satisified. A weaker version of this concept only ensures the post-conditions *if the program terminates*, but terminatation is not guarenteed. In the general case, units in GrapeVine use this weaker version because it is possible to write graph programs (e.g., using the `->*` operator) with uncertain termination properties. 
;;; 
;;; A unit in GrapeVine may be defined with a `(pre p1 p2 ...)` and `(post q1 q2 ...)` expression that defines the pre- and post-conditions for the unit, respectively. Each condition passed to `pre` or `post` must be a function that accepts a GRAPE and returns a boolean value. The overall pre- or post-condition is satisfied if the conjunction of the conditions, e.g., `(pre p1 p2 p3)` is only satisfied if `(and (p1 G) (p2 G) (p3 G))` (where `G` is a GRAPE) evaluates to true.
;;; 
;;; To make evaluation of pre- and post-conditions easier, GrapeVine provides a helper function `forall-graphs?` that, given a list of graph constraints, determines whether all graphs in the GRAPE satisfy the all the constraints. Similarly, the `exists-graph?` determines if at least one graph in the GRAPE satisfies all conditions.
;;; 
;;; Let's redefine the `cheese-pizza` unit have pre- and post-conditions. For the pre-condition, because we don't want to make duplicate/redundant pizzas, we will confirm that no graph exists where the provided order id is already in use. Similarly, for the post-condition, we will confirm that, after the unit's graph program executes, there exists a pizza with the provided order id. We use the `forall-graphs?` helper function because we want the pre- and post-conditions to be satisfied by all graphs in the GRAPE.
;;; 
;; **

;; @@
(constraint order-exists? [oid] (node :Crust {:order "&oid"}))

(unit cheese-pizza [oid]
      (pre (forall-graphs? (order-exists?- oid)))
      (post (forall-graphs? (order-exists? oid)))
      (prog
       (crust oid) 
       (add-topping oid "cheese")))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;energized-valley/cheese-pizza</span>","value":"#'energized-valley/cheese-pizza"}
;; <=

;; @@
(-> (newgrape) (cheese-pizza 1) view)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"313pt\" height=\"217pt\"\n viewBox=\"0.00 0.00 313.00 217.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 213)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-213 309,-213 309,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" stroke-dasharray=\"1,5\" points=\"8,-8 8,-201 297,-201 297,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"152.5\" y=\"-183.7\" font-family=\"Times,serif\" font-size=\"14.00\">GRAPH: 574f5dc6&#45;80af&#45;4fe3&#45;95bb&#45;72fd86af0787</text>\n</g>\n<!-- 77773 -->\n<g id=\"node1\" class=\"node\">\n<title>77773</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M118.12,-119C118.12,-119 185.88,-119 185.88,-119 191.88,-119 197.88,-125 197.88,-131 197.88,-131 197.88,-156 197.88,-156 197.88,-162 191.88,-168 185.88,-168 185.88,-168 118.12,-168 118.12,-168 112.12,-168 106.12,-162 106.12,-156 106.12,-156 106.12,-131 106.12,-131 106.12,-125 112.12,-119 118.12,-119\"/>\n<text text-anchor=\"middle\" x=\"152\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77773)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"106.12,-143.5 197.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"152\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1</text>\n</g>\n<!-- 77775 -->\n<g id=\"node2\" class=\"node\">\n<title>77775</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M109.88,-16.5C109.88,-16.5 194.12,-16.5 194.12,-16.5 200.12,-16.5 206.12,-22.5 206.12,-28.5 206.12,-28.5 206.12,-53.5 206.12,-53.5 206.12,-59.5 200.12,-65.5 194.12,-65.5 194.12,-65.5 109.88,-65.5 109.88,-65.5 103.88,-65.5 97.88,-59.5 97.88,-53.5 97.88,-53.5 97.88,-28.5 97.88,-28.5 97.88,-22.5 103.88,-16.5 109.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"152\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77775)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"97.88,-41 206.12,-41\"/>\n<text text-anchor=\"middle\" x=\"152\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77773&#45;&gt;77775 -->\n<g id=\"edge1\" class=\"edge\">\n<title>77773&#45;&gt;77775</title>\n<path fill=\"none\" stroke=\"black\" d=\"M152,-119.19C152,-106.38 152,-90.25 152,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"155.5,-76.18 152,-66.18 148.5,-76.18 155.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"161\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"313pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 313.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 309,-213 309,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 297,-201 297,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"152.5\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: 574f5dc6&#45;80af&#45;4fe3&#45;95bb&#45;72fd86af0787</text>\\n</g>\\n<!-- 77773 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77773</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M118.12,-119C118.12,-119 185.88,-119 185.88,-119 191.88,-119 197.88,-125 197.88,-131 197.88,-131 197.88,-156 197.88,-156 197.88,-162 191.88,-168 185.88,-168 185.88,-168 118.12,-168 118.12,-168 112.12,-168 106.12,-162 106.12,-156 106.12,-156 106.12,-131 106.12,-131 106.12,-125 112.12,-119 118.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"152\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77773)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"106.12,-143.5 197.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"152\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1</text>\\n</g>\\n<!-- 77775 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77775</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M109.88,-16.5C109.88,-16.5 194.12,-16.5 194.12,-16.5 200.12,-16.5 206.12,-22.5 206.12,-28.5 206.12,-28.5 206.12,-53.5 206.12,-53.5 206.12,-59.5 200.12,-65.5 194.12,-65.5 194.12,-65.5 109.88,-65.5 109.88,-65.5 103.88,-65.5 97.88,-59.5 97.88,-53.5 97.88,-53.5 97.88,-28.5 97.88,-28.5 97.88,-22.5 103.88,-16.5 109.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"152\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77775)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"97.88,-41 206.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"152\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77773&#45;&gt;77775 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77773&#45;&gt;77775</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M152,-119.19C152,-106.38 152,-90.25 152,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"155.5,-76.18 152,-66.18 148.5,-76.18 155.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"161\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"}"}],"value":"(#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"313pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 313.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 309,-213 309,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 297,-201 297,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"152.5\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: 574f5dc6&#45;80af&#45;4fe3&#45;95bb&#45;72fd86af0787</text>\\n</g>\\n<!-- 77773 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77773</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M118.12,-119C118.12,-119 185.88,-119 185.88,-119 191.88,-119 197.88,-125 197.88,-131 197.88,-131 197.88,-156 197.88,-156 197.88,-162 191.88,-168 185.88,-168 185.88,-168 118.12,-168 118.12,-168 112.12,-168 106.12,-162 106.12,-156 106.12,-156 106.12,-131 106.12,-131 106.12,-125 112.12,-119 118.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"152\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77773)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"106.12,-143.5 197.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"152\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1</text>\\n</g>\\n<!-- 77775 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77775</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M109.88,-16.5C109.88,-16.5 194.12,-16.5 194.12,-16.5 200.12,-16.5 206.12,-22.5 206.12,-28.5 206.12,-28.5 206.12,-53.5 206.12,-53.5 206.12,-59.5 200.12,-65.5 194.12,-65.5 194.12,-65.5 109.88,-65.5 109.88,-65.5 103.88,-65.5 97.88,-59.5 97.88,-53.5 97.88,-53.5 97.88,-28.5 97.88,-28.5 97.88,-22.5 103.88,-16.5 109.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"152\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77775)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"97.88,-41 206.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"152\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77773&#45;&gt;77775 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77773&#45;&gt;77775</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M152,-119.19C152,-106.38 152,-90.25 152,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"155.5,-76.18 152,-66.18 148.5,-76.18 155.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"161\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"})"}
;; <=

;; **
;;; ### Contract Violations
;;; 
;;; Notice that executing the unit has the same effect as before, were the pre- and post-conditions even checked? 
;;; 
;;; Where units are concerned, GrapeVine's default configuration is one of 'non-interference'. That is, GrapeVine's default configuration silently checks conditions and records the result (as a side-effect of the unit's execution) such that the user can query the results later using two utility functions `(pre?)` and `(post?)` respectively.
;; **

;; @@
(println "pre-condition" (pre?))
(println "post-condition" (post?))
;; @@
;; ->
;;; pre-condition true
;;; post-condition true
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; We can see that both the pre- and post-condition were satisfied before and after the unit's execution, respectively. 
;;; 
;;; This default configuration can be changed. Rather than silently reporting condition failures, GrapeVine and be configured to throw a Clojure exception if a pre- or post-condition fails. 
;; **

;; @@
(set-unit-failure-policy false) ;; sets policy to "silent" reporting, the is is the default.
(set-unit-failure-policy true) ;; sets policy to thrown an exception.
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:check</span>","value":":check"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:check true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:fail</span>","value":":fail"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:fail true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack-size</span>","value":":stack-size"},{"type":"html","content":"<span class='clj-long'>100</span>","value":"100"}],"value":"[:stack-size 100]"}],"value":"{:check true, :fail true, :stack-size 100}"}
;; <=

;; **
;;; Now, if we attempt to execute a unit on a GRAPE that violates the pre-condition, we will observe an exception.
;; **

;; @@
(-> 
  (newgrape)
  (crust 1000) ;; create a new pizza being created with order ID 1000
  (cheese-pizza 1000) ;; should fail b/c pizza with order ID 1000 already exists!
  )
;; @@

;; **
;;; ### Disabling Checking
;;; 
;;; By default, conditions on units are always checked (and the configured failure policy employed). However, you can also entirely disable pre- and post-condition checking. This might be helpful for performance, once you are confident in your GT system's behaviour.
;; **

;; @@
(set-unit-check-policy false) ;; disables all pre- and post-condition checking
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:check</span>","value":":check"},{"type":"html","content":"<span class='clj-unkown'>false</span>","value":"false"}],"value":"[:check false]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:fail</span>","value":":fail"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:fail true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack-size</span>","value":":stack-size"},{"type":"html","content":"<span class='clj-long'>100</span>","value":"100"}],"value":"[:stack-size 100]"}],"value":"{:check false, :fail true, :stack-size 100}"}
;; <=

;; @@
(-> 
  (newgrape)
  (crust 1000)
  (cheese-pizza 1000)
  view
  )
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"316pt\" height=\"217pt\"\n viewBox=\"0.00 0.00 316.00 217.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 213)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-213 312,-213 312,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" stroke-dasharray=\"1,5\" points=\"8,-8 8,-201 300,-201 300,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"154\" y=\"-183.7\" font-family=\"Times,serif\" font-size=\"14.00\">GRAPH: 744eb7cf&#45;2129&#45;491f&#45;8527&#45;207ed6a6e6f4</text>\n</g>\n<!-- 77782 -->\n<g id=\"node1\" class=\"node\">\n<title>77782</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M187.12,-119C187.12,-119 254.88,-119 254.88,-119 260.88,-119 266.88,-125 266.88,-131 266.88,-131 266.88,-156 266.88,-156 266.88,-162 260.88,-168 254.88,-168 254.88,-168 187.12,-168 187.12,-168 181.12,-168 175.12,-162 175.12,-156 175.12,-156 175.12,-131 175.12,-131 175.12,-125 181.12,-119 187.12,-119\"/>\n<text text-anchor=\"middle\" x=\"221\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77782)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"175.12,-143.5 266.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"221\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1000</text>\n</g>\n<!-- 77786 -->\n<g id=\"node3\" class=\"node\">\n<title>77786</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M178.88,-16.5C178.88,-16.5 263.12,-16.5 263.12,-16.5 269.12,-16.5 275.12,-22.5 275.12,-28.5 275.12,-28.5 275.12,-53.5 275.12,-53.5 275.12,-59.5 269.12,-65.5 263.12,-65.5 263.12,-65.5 178.88,-65.5 178.88,-65.5 172.88,-65.5 166.88,-59.5 166.88,-53.5 166.88,-53.5 166.88,-28.5 166.88,-28.5 166.88,-22.5 172.88,-16.5 178.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"221\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77786)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"166.88,-41 275.12,-41\"/>\n<text text-anchor=\"middle\" x=\"221\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77782&#45;&gt;77786 -->\n<g id=\"edge1\" class=\"edge\">\n<title>77782&#45;&gt;77786</title>\n<path fill=\"none\" stroke=\"black\" d=\"M221,-119.19C221,-106.38 221,-90.25 221,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"224.5,-76.18 221,-66.18 217.5,-76.18 224.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"230\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n<!-- 77784 -->\n<g id=\"node2\" class=\"node\">\n<title>77784</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M61.12,-119C61.12,-119 128.88,-119 128.88,-119 134.88,-119 140.88,-125 140.88,-131 140.88,-131 140.88,-156 140.88,-156 140.88,-162 134.88,-168 128.88,-168 128.88,-168 61.12,-168 61.12,-168 55.12,-168 49.12,-162 49.12,-156 49.12,-156 49.12,-131 49.12,-131 49.12,-125 55.12,-119 61.12,-119\"/>\n<text text-anchor=\"middle\" x=\"95\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77784)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"49.12,-143.5 140.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"95\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1000</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"316pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 316.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 312,-213 312,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 300,-201 300,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"154\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: 744eb7cf&#45;2129&#45;491f&#45;8527&#45;207ed6a6e6f4</text>\\n</g>\\n<!-- 77782 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77782</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M187.12,-119C187.12,-119 254.88,-119 254.88,-119 260.88,-119 266.88,-125 266.88,-131 266.88,-131 266.88,-156 266.88,-156 266.88,-162 260.88,-168 254.88,-168 254.88,-168 187.12,-168 187.12,-168 181.12,-168 175.12,-162 175.12,-156 175.12,-156 175.12,-131 175.12,-131 175.12,-125 181.12,-119 187.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"221\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77782)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"175.12,-143.5 266.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"221\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77786 -->\\n<g id=\\\"node3\\\" class=\\\"node\\\">\\n<title>77786</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M178.88,-16.5C178.88,-16.5 263.12,-16.5 263.12,-16.5 269.12,-16.5 275.12,-22.5 275.12,-28.5 275.12,-28.5 275.12,-53.5 275.12,-53.5 275.12,-59.5 269.12,-65.5 263.12,-65.5 263.12,-65.5 178.88,-65.5 178.88,-65.5 172.88,-65.5 166.88,-59.5 166.88,-53.5 166.88,-53.5 166.88,-28.5 166.88,-28.5 166.88,-22.5 172.88,-16.5 178.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"221\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77786)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"166.88,-41 275.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"221\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77782&#45;&gt;77786 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77782&#45;&gt;77786</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M221,-119.19C221,-106.38 221,-90.25 221,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"224.5,-76.18 221,-66.18 217.5,-76.18 224.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"230\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77784 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77784</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M61.12,-119C61.12,-119 128.88,-119 128.88,-119 134.88,-119 140.88,-125 140.88,-131 140.88,-131 140.88,-156 140.88,-156 140.88,-162 134.88,-168 128.88,-168 128.88,-168 61.12,-168 61.12,-168 55.12,-168 49.12,-162 49.12,-156 49.12,-156 49.12,-131 49.12,-131 49.12,-125 55.12,-119 61.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"95\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77784)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"49.12,-143.5 140.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"95\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n</g>\\n</svg>\\n\"}"},{"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"323pt\" height=\"217pt\"\n viewBox=\"0.00 0.00 323.00 217.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 213)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-213 319,-213 319,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" stroke-dasharray=\"1,5\" points=\"8,-8 8,-201 307,-201 307,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"157.5\" y=\"-183.7\" font-family=\"Times,serif\" font-size=\"14.00\">GRAPH: b882a393&#45;463e&#45;4113&#45;9773&#45;dac10319a581</text>\n</g>\n<!-- 77782 -->\n<g id=\"node1\" class=\"node\">\n<title>77782</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M200.12,-119C200.12,-119 267.88,-119 267.88,-119 273.88,-119 279.88,-125 279.88,-131 279.88,-131 279.88,-156 279.88,-156 279.88,-162 273.88,-168 267.88,-168 267.88,-168 200.12,-168 200.12,-168 194.12,-168 188.12,-162 188.12,-156 188.12,-156 188.12,-131 188.12,-131 188.12,-125 194.12,-119 200.12,-119\"/>\n<text text-anchor=\"middle\" x=\"234\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77782)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"188.12,-143.5 279.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"234\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1000</text>\n</g>\n<!-- 77784 -->\n<g id=\"node2\" class=\"node\">\n<title>77784</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M54.12,-119C54.12,-119 121.88,-119 121.88,-119 127.88,-119 133.88,-125 133.88,-131 133.88,-131 133.88,-156 133.88,-156 133.88,-162 127.88,-168 121.88,-168 121.88,-168 54.12,-168 54.12,-168 48.12,-168 42.12,-162 42.12,-156 42.12,-156 42.12,-131 42.12,-131 42.12,-125 48.12,-119 54.12,-119\"/>\n<text text-anchor=\"middle\" x=\"88\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77784)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"42.12,-143.5 133.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"88\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1000</text>\n</g>\n<!-- 77788 -->\n<g id=\"node3\" class=\"node\">\n<title>77788</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M45.88,-16.5C45.88,-16.5 130.12,-16.5 130.12,-16.5 136.12,-16.5 142.12,-22.5 142.12,-28.5 142.12,-28.5 142.12,-53.5 142.12,-53.5 142.12,-59.5 136.12,-65.5 130.12,-65.5 130.12,-65.5 45.88,-65.5 45.88,-65.5 39.88,-65.5 33.88,-59.5 33.88,-53.5 33.88,-53.5 33.88,-28.5 33.88,-28.5 33.88,-22.5 39.88,-16.5 45.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"88\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77788)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"33.88,-41 142.12,-41\"/>\n<text text-anchor=\"middle\" x=\"88\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77784&#45;&gt;77788 -->\n<g id=\"edge1\" class=\"edge\">\n<title>77784&#45;&gt;77788</title>\n<path fill=\"none\" stroke=\"black\" d=\"M88,-119.19C88,-106.38 88,-90.25 88,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"91.5,-76.18 88,-66.18 84.5,-76.18 91.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"97\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"323pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 323.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 319,-213 319,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 307,-201 307,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157.5\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: b882a393&#45;463e&#45;4113&#45;9773&#45;dac10319a581</text>\\n</g>\\n<!-- 77782 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77782</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M200.12,-119C200.12,-119 267.88,-119 267.88,-119 273.88,-119 279.88,-125 279.88,-131 279.88,-131 279.88,-156 279.88,-156 279.88,-162 273.88,-168 267.88,-168 267.88,-168 200.12,-168 200.12,-168 194.12,-168 188.12,-162 188.12,-156 188.12,-156 188.12,-131 188.12,-131 188.12,-125 194.12,-119 200.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"234\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77782)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"188.12,-143.5 279.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"234\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77784 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77784</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M54.12,-119C54.12,-119 121.88,-119 121.88,-119 127.88,-119 133.88,-125 133.88,-131 133.88,-131 133.88,-156 133.88,-156 133.88,-162 127.88,-168 121.88,-168 121.88,-168 54.12,-168 54.12,-168 48.12,-168 42.12,-162 42.12,-156 42.12,-156 42.12,-131 42.12,-131 42.12,-125 48.12,-119 54.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"88\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77784)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"42.12,-143.5 133.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"88\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77788 -->\\n<g id=\\\"node3\\\" class=\\\"node\\\">\\n<title>77788</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M45.88,-16.5C45.88,-16.5 130.12,-16.5 130.12,-16.5 136.12,-16.5 142.12,-22.5 142.12,-28.5 142.12,-28.5 142.12,-53.5 142.12,-53.5 142.12,-59.5 136.12,-65.5 130.12,-65.5 130.12,-65.5 45.88,-65.5 45.88,-65.5 39.88,-65.5 33.88,-59.5 33.88,-53.5 33.88,-53.5 33.88,-28.5 33.88,-28.5 33.88,-22.5 39.88,-16.5 45.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"88\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77788)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"33.88,-41 142.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"88\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77784&#45;&gt;77788 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77784&#45;&gt;77788</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M88,-119.19C88,-106.38 88,-90.25 88,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"91.5,-76.18 88,-66.18 84.5,-76.18 91.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"97\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"}"}],"value":"(#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"316pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 316.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 312,-213 312,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 300,-201 300,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"154\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: 744eb7cf&#45;2129&#45;491f&#45;8527&#45;207ed6a6e6f4</text>\\n</g>\\n<!-- 77782 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77782</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M187.12,-119C187.12,-119 254.88,-119 254.88,-119 260.88,-119 266.88,-125 266.88,-131 266.88,-131 266.88,-156 266.88,-156 266.88,-162 260.88,-168 254.88,-168 254.88,-168 187.12,-168 187.12,-168 181.12,-168 175.12,-162 175.12,-156 175.12,-156 175.12,-131 175.12,-131 175.12,-125 181.12,-119 187.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"221\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77782)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"175.12,-143.5 266.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"221\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77786 -->\\n<g id=\\\"node3\\\" class=\\\"node\\\">\\n<title>77786</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M178.88,-16.5C178.88,-16.5 263.12,-16.5 263.12,-16.5 269.12,-16.5 275.12,-22.5 275.12,-28.5 275.12,-28.5 275.12,-53.5 275.12,-53.5 275.12,-59.5 269.12,-65.5 263.12,-65.5 263.12,-65.5 178.88,-65.5 178.88,-65.5 172.88,-65.5 166.88,-59.5 166.88,-53.5 166.88,-53.5 166.88,-28.5 166.88,-28.5 166.88,-22.5 172.88,-16.5 178.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"221\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77786)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"166.88,-41 275.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"221\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77782&#45;&gt;77786 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77782&#45;&gt;77786</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M221,-119.19C221,-106.38 221,-90.25 221,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"224.5,-76.18 221,-66.18 217.5,-76.18 224.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"230\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77784 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77784</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M61.12,-119C61.12,-119 128.88,-119 128.88,-119 134.88,-119 140.88,-125 140.88,-131 140.88,-131 140.88,-156 140.88,-156 140.88,-162 134.88,-168 128.88,-168 128.88,-168 61.12,-168 61.12,-168 55.12,-168 49.12,-162 49.12,-156 49.12,-156 49.12,-131 49.12,-131 49.12,-125 55.12,-119 61.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"95\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77784)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"49.12,-143.5 140.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"95\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n</g>\\n</svg>\\n\"} #gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"323pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 323.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 319,-213 319,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 307,-201 307,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157.5\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: b882a393&#45;463e&#45;4113&#45;9773&#45;dac10319a581</text>\\n</g>\\n<!-- 77782 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77782</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M200.12,-119C200.12,-119 267.88,-119 267.88,-119 273.88,-119 279.88,-125 279.88,-131 279.88,-131 279.88,-156 279.88,-156 279.88,-162 273.88,-168 267.88,-168 267.88,-168 200.12,-168 200.12,-168 194.12,-168 188.12,-162 188.12,-156 188.12,-156 188.12,-131 188.12,-131 188.12,-125 194.12,-119 200.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"234\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77782)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"188.12,-143.5 279.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"234\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77784 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77784</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M54.12,-119C54.12,-119 121.88,-119 121.88,-119 127.88,-119 133.88,-125 133.88,-131 133.88,-131 133.88,-156 133.88,-156 133.88,-162 127.88,-168 121.88,-168 121.88,-168 54.12,-168 54.12,-168 48.12,-168 42.12,-162 42.12,-156 42.12,-156 42.12,-131 42.12,-131 42.12,-125 48.12,-119 54.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"88\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77784)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"42.12,-143.5 133.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"88\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77788 -->\\n<g id=\\\"node3\\\" class=\\\"node\\\">\\n<title>77788</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M45.88,-16.5C45.88,-16.5 130.12,-16.5 130.12,-16.5 136.12,-16.5 142.12,-22.5 142.12,-28.5 142.12,-28.5 142.12,-53.5 142.12,-53.5 142.12,-59.5 136.12,-65.5 130.12,-65.5 130.12,-65.5 45.88,-65.5 45.88,-65.5 39.88,-65.5 33.88,-59.5 33.88,-53.5 33.88,-53.5 33.88,-28.5 33.88,-28.5 33.88,-22.5 39.88,-16.5 45.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"88\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77788)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"33.88,-41 142.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"88\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77784&#45;&gt;77788 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77784&#45;&gt;77788</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M88,-119.19C88,-106.38 88,-90.25 88,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"91.5,-76.18 88,-66.18 84.5,-76.18 91.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"97\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"})"}
;; <=

;; **
;;; With checking disabled, we end up with graphs with duplicate order IDs.
;; **

;; **
;;; ### Handling Failure
;;; 
;;; Assuming that checking is enabled, what do we do about unit failure? If the failure policy is configured to `FAIL`, then we can use some helper functions to attempt unit execution and then perform a specific action dependent on whether the unit's execution fails. There are four options: 
;;; 
;;; * `(try-skip my-unit)` Attempts to execute `my-unit`, if the pre- or post-condition fails, then "skips" the unit's execution as if it never occured and return the original GRAPE.
;;; * `(try-else my-unit my-other-unit)` Attempts to execute `my-unit`, if the pre- or post-condition fails, then invokes `my-other-unit` on the GRAPE that was originally provided.
;;; * `(try-resume-and-do my-unit)` Executes `my-unit` and ignores any failures that might occur and simply returns the resulting GRAPE.
;;; * `(try-empty my-unit)` Attempts to execute `my-unit`, if the pre- or post-condition fails, then returns an empty GRAPE (i.e., `()`) instead.
;;; 
;;; In order for these helper functions to work properly, the unit policy must be set to enable checking and enable unit failure.
;; **

;; @@
(set-unit-failure-policy true)
(set-unit-check-policy true)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:check</span>","value":":check"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:check true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:fail</span>","value":":fail"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:fail true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack-size</span>","value":":stack-size"},{"type":"html","content":"<span class='clj-long'>100</span>","value":"100"}],"value":"[:stack-size 100]"}],"value":"{:check true, :fail true, :stack-size 100}"}
;; <=

;; **
;;; #### Try Skip
;;; 
;;; Now let's enable "FAIL" failure for unit execution and write a program that, if creating a pizza fails, then it skips creating the pizza entirely. This will avoid order duplication.
;; **

;; @@
(-> 
  (newgrape)
  (cheese-pizza 1000) ;; create a pizza with order 1000
  (try-skip (cheese-pizza 1000)) ;; try creating a duplicate order, should be skipped.
  view)
;; @@
;; ->
;;; (try (cheese-pizza (cheese-pizza (newgrape) 1000) 1000) (catch AssertionError _ (cheese-pizza (newgrape) 1000)))
;;; 
;; <-
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"322pt\" height=\"217pt\"\n viewBox=\"0.00 0.00 322.00 217.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 213)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-213 318,-213 318,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" stroke-dasharray=\"1,5\" points=\"8,-8 8,-201 306,-201 306,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"157\" y=\"-183.7\" font-family=\"Times,serif\" font-size=\"14.00\">GRAPH: 4691805c&#45;4a47&#45;42bc&#45;b3e6&#45;cc437b7b7017</text>\n</g>\n<!-- 77799 -->\n<g id=\"node1\" class=\"node\">\n<title>77799</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M123.12,-119C123.12,-119 190.88,-119 190.88,-119 196.88,-119 202.88,-125 202.88,-131 202.88,-131 202.88,-156 202.88,-156 202.88,-162 196.88,-168 190.88,-168 190.88,-168 123.12,-168 123.12,-168 117.12,-168 111.12,-162 111.12,-156 111.12,-156 111.12,-131 111.12,-131 111.12,-125 117.12,-119 123.12,-119\"/>\n<text text-anchor=\"middle\" x=\"157\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77799)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"111.12,-143.5 202.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"157\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1000</text>\n</g>\n<!-- 77801 -->\n<g id=\"node2\" class=\"node\">\n<title>77801</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M114.88,-16.5C114.88,-16.5 199.12,-16.5 199.12,-16.5 205.12,-16.5 211.12,-22.5 211.12,-28.5 211.12,-28.5 211.12,-53.5 211.12,-53.5 211.12,-59.5 205.12,-65.5 199.12,-65.5 199.12,-65.5 114.88,-65.5 114.88,-65.5 108.88,-65.5 102.88,-59.5 102.88,-53.5 102.88,-53.5 102.88,-28.5 102.88,-28.5 102.88,-22.5 108.88,-16.5 114.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"157\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77801)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"102.88,-41 211.12,-41\"/>\n<text text-anchor=\"middle\" x=\"157\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77799&#45;&gt;77801 -->\n<g id=\"edge1\" class=\"edge\">\n<title>77799&#45;&gt;77801</title>\n<path fill=\"none\" stroke=\"black\" d=\"M157,-119.19C157,-106.38 157,-90.25 157,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"160.5,-76.18 157,-66.18 153.5,-76.18 160.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"166\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"322pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 322.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 318,-213 318,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 306,-201 306,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: 4691805c&#45;4a47&#45;42bc&#45;b3e6&#45;cc437b7b7017</text>\\n</g>\\n<!-- 77799 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77799</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M123.12,-119C123.12,-119 190.88,-119 190.88,-119 196.88,-119 202.88,-125 202.88,-131 202.88,-131 202.88,-156 202.88,-156 202.88,-162 196.88,-168 190.88,-168 190.88,-168 123.12,-168 123.12,-168 117.12,-168 111.12,-162 111.12,-156 111.12,-156 111.12,-131 111.12,-131 111.12,-125 117.12,-119 123.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77799)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"111.12,-143.5 202.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77801 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77801</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M114.88,-16.5C114.88,-16.5 199.12,-16.5 199.12,-16.5 205.12,-16.5 211.12,-22.5 211.12,-28.5 211.12,-28.5 211.12,-53.5 211.12,-53.5 211.12,-59.5 205.12,-65.5 199.12,-65.5 199.12,-65.5 114.88,-65.5 114.88,-65.5 108.88,-65.5 102.88,-59.5 102.88,-53.5 102.88,-53.5 102.88,-28.5 102.88,-28.5 102.88,-22.5 108.88,-16.5 114.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77801)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"102.88,-41 211.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77799&#45;&gt;77801 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77799&#45;&gt;77801</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M157,-119.19C157,-106.38 157,-90.25 157,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"160.5,-76.18 157,-66.18 153.5,-76.18 160.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"166\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"}"}],"value":"(#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"322pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 322.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 318,-213 318,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 306,-201 306,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: 4691805c&#45;4a47&#45;42bc&#45;b3e6&#45;cc437b7b7017</text>\\n</g>\\n<!-- 77799 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77799</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M123.12,-119C123.12,-119 190.88,-119 190.88,-119 196.88,-119 202.88,-125 202.88,-131 202.88,-131 202.88,-156 202.88,-156 202.88,-162 196.88,-168 190.88,-168 190.88,-168 123.12,-168 123.12,-168 117.12,-168 111.12,-162 111.12,-156 111.12,-156 111.12,-131 111.12,-131 111.12,-125 117.12,-119 123.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77799)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"111.12,-143.5 202.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77801 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77801</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M114.88,-16.5C114.88,-16.5 199.12,-16.5 199.12,-16.5 205.12,-16.5 211.12,-22.5 211.12,-28.5 211.12,-28.5 211.12,-53.5 211.12,-53.5 211.12,-59.5 205.12,-65.5 199.12,-65.5 199.12,-65.5 114.88,-65.5 114.88,-65.5 108.88,-65.5 102.88,-59.5 102.88,-53.5 102.88,-53.5 102.88,-28.5 102.88,-28.5 102.88,-22.5 108.88,-16.5 114.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77801)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"102.88,-41 211.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77799&#45;&gt;77801 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77799&#45;&gt;77801</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M157,-119.19C157,-106.38 157,-90.25 157,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"160.5,-76.18 157,-66.18 153.5,-76.18 160.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"166\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"})"}
;; <=

;; **
;;; As wanted, this results in a single cheese being created. The second pizza creation failed and was skipped.
;; **

;; **
;;; #### Try Else
;;; 
;;; Suppose instead that we want to have an alternative operation if the first operation fails. Then we can use the `try-else` function. 
;;; 
;;; If creating a new veggie pizza fails, then we will simply add the ingredients "manually" by executing the respective rules to add mushroom and pepper toppings.
;; **

;; @@
(-> 
  (newgrape)
  (cheese-pizza 1000) ;; create a pizza with order 1000
  (try-else 
   (veggie-pizza 1000) ;; should fail
   (-> 				   ;; alternative action if creating the veggie pizza fails.	
     (add-topping 1000 "mushroom")
     (add-topping 1000 "green pepper"))
   )
  view)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"418pt\" height=\"217pt\"\n viewBox=\"0.00 0.00 418.00 217.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 213)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-213 414,-213 414,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" stroke-dasharray=\"1,5\" points=\"8,-8 8,-201 402,-201 402,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"205\" y=\"-183.7\" font-family=\"Times,serif\" font-size=\"14.00\">GRAPH: a3bbc924&#45;602b&#45;4daf&#45;89a2&#45;26595d20c794</text>\n</g>\n<!-- 77811 -->\n<g id=\"node1\" class=\"node\">\n<title>77811</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M164.12,-119C164.12,-119 231.88,-119 231.88,-119 237.88,-119 243.88,-125 243.88,-131 243.88,-131 243.88,-156 243.88,-156 243.88,-162 237.88,-168 231.88,-168 231.88,-168 164.12,-168 164.12,-168 158.12,-168 152.12,-162 152.12,-156 152.12,-156 152.12,-131 152.12,-131 152.12,-125 158.12,-119 164.12,-119\"/>\n<text text-anchor=\"middle\" x=\"198\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77811)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"152.12,-143.5 243.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"198\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1000</text>\n</g>\n<!-- 77813 -->\n<g id=\"node2\" class=\"node\">\n<title>77813</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M27.88,-16.5C27.88,-16.5 112.12,-16.5 112.12,-16.5 118.12,-16.5 124.12,-22.5 124.12,-28.5 124.12,-28.5 124.12,-53.5 124.12,-53.5 124.12,-59.5 118.12,-65.5 112.12,-65.5 112.12,-65.5 27.88,-65.5 27.88,-65.5 21.88,-65.5 15.88,-59.5 15.88,-53.5 15.88,-53.5 15.88,-28.5 15.88,-28.5 15.88,-22.5 21.88,-16.5 27.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"70\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77813)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"15.88,-41 124.12,-41\"/>\n<text text-anchor=\"middle\" x=\"70\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77811&#45;&gt;77813 -->\n<g id=\"edge1\" class=\"edge\">\n<title>77811&#45;&gt;77813</title>\n<path fill=\"none\" stroke=\"black\" d=\"M168.31,-119.19C150.38,-105.11 127.35,-87.03 108.08,-71.9\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"110.55,-68.61 100.53,-65.18 106.23,-74.11 110.55,-68.61\"/>\n<text text-anchor=\"middle\" x=\"150\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n<!-- 77816 -->\n<g id=\"node3\" class=\"node\">\n<title>77816</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M154.38,-16.5C154.38,-16.5 241.62,-16.5 241.62,-16.5 247.62,-16.5 253.62,-22.5 253.62,-28.5 253.62,-28.5 253.62,-53.5 253.62,-53.5 253.62,-59.5 247.62,-65.5 241.62,-65.5 241.62,-65.5 154.38,-65.5 154.38,-65.5 148.38,-65.5 142.38,-59.5 142.38,-53.5 142.38,-53.5 142.38,-28.5 142.38,-28.5 142.38,-22.5 148.38,-16.5 154.38,-16.5\"/>\n<text text-anchor=\"middle\" x=\"198\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77816)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"142.38,-41 253.62,-41\"/>\n<text text-anchor=\"middle\" x=\"198\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;mushroom&#39;</text>\n</g>\n<!-- 77811&#45;&gt;77816 -->\n<g id=\"edge2\" class=\"edge\">\n<title>77811&#45;&gt;77816</title>\n<path fill=\"none\" stroke=\"black\" d=\"M198,-119.19C198,-106.38 198,-90.25 198,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"201.5,-76.18 198,-66.18 194.5,-76.18 201.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"207\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n<!-- 77819 -->\n<g id=\"node4\" class=\"node\">\n<title>77819</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M283.75,-16.5C283.75,-16.5 382.25,-16.5 382.25,-16.5 388.25,-16.5 394.25,-22.5 394.25,-28.5 394.25,-28.5 394.25,-53.5 394.25,-53.5 394.25,-59.5 388.25,-65.5 382.25,-65.5 382.25,-65.5 283.75,-65.5 283.75,-65.5 277.75,-65.5 271.75,-59.5 271.75,-53.5 271.75,-53.5 271.75,-28.5 271.75,-28.5 271.75,-22.5 277.75,-16.5 283.75,-16.5\"/>\n<text text-anchor=\"middle\" x=\"333\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77819)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"271.75,-41 394.25,-41\"/>\n<text text-anchor=\"middle\" x=\"333\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;green pepper&#39;</text>\n</g>\n<!-- 77811&#45;&gt;77819 -->\n<g id=\"edge3\" class=\"edge\">\n<title>77811&#45;&gt;77819</title>\n<path fill=\"none\" stroke=\"black\" d=\"M229.31,-119.19C248.31,-105.05 272.74,-86.86 293.11,-71.7\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"294.93,-73.96 300.86,-65.18 290.75,-68.35 294.93,-73.96\"/>\n<text text-anchor=\"middle\" x=\"282\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"418pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 418.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 414,-213 414,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 402,-201 402,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"205\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: a3bbc924&#45;602b&#45;4daf&#45;89a2&#45;26595d20c794</text>\\n</g>\\n<!-- 77811 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77811</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M164.12,-119C164.12,-119 231.88,-119 231.88,-119 237.88,-119 243.88,-125 243.88,-131 243.88,-131 243.88,-156 243.88,-156 243.88,-162 237.88,-168 231.88,-168 231.88,-168 164.12,-168 164.12,-168 158.12,-168 152.12,-162 152.12,-156 152.12,-156 152.12,-131 152.12,-131 152.12,-125 158.12,-119 164.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"198\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77811)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"152.12,-143.5 243.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"198\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77813 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77813</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M27.88,-16.5C27.88,-16.5 112.12,-16.5 112.12,-16.5 118.12,-16.5 124.12,-22.5 124.12,-28.5 124.12,-28.5 124.12,-53.5 124.12,-53.5 124.12,-59.5 118.12,-65.5 112.12,-65.5 112.12,-65.5 27.88,-65.5 27.88,-65.5 21.88,-65.5 15.88,-59.5 15.88,-53.5 15.88,-53.5 15.88,-28.5 15.88,-28.5 15.88,-22.5 21.88,-16.5 27.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77813)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"15.88,-41 124.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77811&#45;&gt;77813 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77811&#45;&gt;77813</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M168.31,-119.19C150.38,-105.11 127.35,-87.03 108.08,-71.9\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"110.55,-68.61 100.53,-65.18 106.23,-74.11 110.55,-68.61\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"150\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77816 -->\\n<g id=\\\"node3\\\" class=\\\"node\\\">\\n<title>77816</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M154.38,-16.5C154.38,-16.5 241.62,-16.5 241.62,-16.5 247.62,-16.5 253.62,-22.5 253.62,-28.5 253.62,-28.5 253.62,-53.5 253.62,-53.5 253.62,-59.5 247.62,-65.5 241.62,-65.5 241.62,-65.5 154.38,-65.5 154.38,-65.5 148.38,-65.5 142.38,-59.5 142.38,-53.5 142.38,-53.5 142.38,-28.5 142.38,-28.5 142.38,-22.5 148.38,-16.5 154.38,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"198\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77816)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"142.38,-41 253.62,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"198\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;mushroom&#39;</text>\\n</g>\\n<!-- 77811&#45;&gt;77816 -->\\n<g id=\\\"edge2\\\" class=\\\"edge\\\">\\n<title>77811&#45;&gt;77816</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M198,-119.19C198,-106.38 198,-90.25 198,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"201.5,-76.18 198,-66.18 194.5,-76.18 201.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"207\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77819 -->\\n<g id=\\\"node4\\\" class=\\\"node\\\">\\n<title>77819</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M283.75,-16.5C283.75,-16.5 382.25,-16.5 382.25,-16.5 388.25,-16.5 394.25,-22.5 394.25,-28.5 394.25,-28.5 394.25,-53.5 394.25,-53.5 394.25,-59.5 388.25,-65.5 382.25,-65.5 382.25,-65.5 283.75,-65.5 283.75,-65.5 277.75,-65.5 271.75,-59.5 271.75,-53.5 271.75,-53.5 271.75,-28.5 271.75,-28.5 271.75,-22.5 277.75,-16.5 283.75,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"333\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77819)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"271.75,-41 394.25,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"333\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;green pepper&#39;</text>\\n</g>\\n<!-- 77811&#45;&gt;77819 -->\\n<g id=\\\"edge3\\\" class=\\\"edge\\\">\\n<title>77811&#45;&gt;77819</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M229.31,-119.19C248.31,-105.05 272.74,-86.86 293.11,-71.7\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"294.93,-73.96 300.86,-65.18 290.75,-68.35 294.93,-73.96\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"282\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"}"}],"value":"(#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"418pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 418.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 414,-213 414,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 402,-201 402,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"205\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: a3bbc924&#45;602b&#45;4daf&#45;89a2&#45;26595d20c794</text>\\n</g>\\n<!-- 77811 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77811</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M164.12,-119C164.12,-119 231.88,-119 231.88,-119 237.88,-119 243.88,-125 243.88,-131 243.88,-131 243.88,-156 243.88,-156 243.88,-162 237.88,-168 231.88,-168 231.88,-168 164.12,-168 164.12,-168 158.12,-168 152.12,-162 152.12,-156 152.12,-156 152.12,-131 152.12,-131 152.12,-125 158.12,-119 164.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"198\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77811)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"152.12,-143.5 243.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"198\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77813 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77813</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M27.88,-16.5C27.88,-16.5 112.12,-16.5 112.12,-16.5 118.12,-16.5 124.12,-22.5 124.12,-28.5 124.12,-28.5 124.12,-53.5 124.12,-53.5 124.12,-59.5 118.12,-65.5 112.12,-65.5 112.12,-65.5 27.88,-65.5 27.88,-65.5 21.88,-65.5 15.88,-59.5 15.88,-53.5 15.88,-53.5 15.88,-28.5 15.88,-28.5 15.88,-22.5 21.88,-16.5 27.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77813)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"15.88,-41 124.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"70\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77811&#45;&gt;77813 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77811&#45;&gt;77813</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M168.31,-119.19C150.38,-105.11 127.35,-87.03 108.08,-71.9\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"110.55,-68.61 100.53,-65.18 106.23,-74.11 110.55,-68.61\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"150\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77816 -->\\n<g id=\\\"node3\\\" class=\\\"node\\\">\\n<title>77816</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M154.38,-16.5C154.38,-16.5 241.62,-16.5 241.62,-16.5 247.62,-16.5 253.62,-22.5 253.62,-28.5 253.62,-28.5 253.62,-53.5 253.62,-53.5 253.62,-59.5 247.62,-65.5 241.62,-65.5 241.62,-65.5 154.38,-65.5 154.38,-65.5 148.38,-65.5 142.38,-59.5 142.38,-53.5 142.38,-53.5 142.38,-28.5 142.38,-28.5 142.38,-22.5 148.38,-16.5 154.38,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"198\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77816)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"142.38,-41 253.62,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"198\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;mushroom&#39;</text>\\n</g>\\n<!-- 77811&#45;&gt;77816 -->\\n<g id=\\\"edge2\\\" class=\\\"edge\\\">\\n<title>77811&#45;&gt;77816</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M198,-119.19C198,-106.38 198,-90.25 198,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"201.5,-76.18 198,-66.18 194.5,-76.18 201.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"207\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n<!-- 77819 -->\\n<g id=\\\"node4\\\" class=\\\"node\\\">\\n<title>77819</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M283.75,-16.5C283.75,-16.5 382.25,-16.5 382.25,-16.5 388.25,-16.5 394.25,-22.5 394.25,-28.5 394.25,-28.5 394.25,-53.5 394.25,-53.5 394.25,-59.5 388.25,-65.5 382.25,-65.5 382.25,-65.5 283.75,-65.5 283.75,-65.5 277.75,-65.5 271.75,-59.5 271.75,-53.5 271.75,-53.5 271.75,-28.5 271.75,-28.5 271.75,-22.5 277.75,-16.5 283.75,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"333\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77819)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"271.75,-41 394.25,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"333\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;green pepper&#39;</text>\\n</g>\\n<!-- 77811&#45;&gt;77819 -->\\n<g id=\\\"edge3\\\" class=\\\"edge\\\">\\n<title>77811&#45;&gt;77819</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M229.31,-119.19C248.31,-105.05 272.74,-86.86 293.11,-71.7\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"294.93,-73.96 300.86,-65.18 290.75,-68.35 294.93,-73.96\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"282\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"})"}
;; <=

;; **
;;; #### Try Resume (and Do)
;;; 
;;; Suppose that, instead of picking an alternative action, we want to resume the computation with our potentially erroneous GRAPE, but execute an additional operation to try to recover the situation. We can use the `try-resume-and-do` function.
;;; 
;;; For example, if we end up detecting duplicate pizza orders, we can execute a "clean up" operation to remove all potential duplicate pizzas and then make the single pizza with the correct order ID.
;;; 
;;; *(Note that in some versions of GrapeVine the `#` operator can be included in the clean-up operation to prune out the duplicate (empty) graphs in the GRAPE).*
;; **

;; @@
(-> 
  (newgrape)
  (cheese-pizza 1000) ;; create a pizza with order 1000
  (try-resume-and-do 
   (cheese-pizza 1000) ;; should fail
   (->
     (->* (->* (remove-topping 1000)) (delete-pizza 1000)) ;; cleanup operation (without filter)
     ;;(->* (->* (remove-topping# 1000)) (delete-pizza# 1000)) ;; cleanup operation (with filter)
     (cheese-pizza 1000) ;; add back our desired cheese pizza after the clean up.
     )
   )
  view)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"318pt\" height=\"217pt\"\n viewBox=\"0.00 0.00 318.00 217.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 213)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-213 314,-213 314,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" stroke-dasharray=\"1,5\" points=\"8,-8 8,-201 302,-201 302,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"155\" y=\"-183.7\" font-family=\"Times,serif\" font-size=\"14.00\">GRAPH: d38a3d14&#45;1f76&#45;420b&#45;8f35&#45;934c2bf82eb7</text>\n</g>\n<!-- 77845 -->\n<g id=\"node1\" class=\"node\">\n<title>77845</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M121.12,-119C121.12,-119 188.88,-119 188.88,-119 194.88,-119 200.88,-125 200.88,-131 200.88,-131 200.88,-156 200.88,-156 200.88,-162 194.88,-168 188.88,-168 188.88,-168 121.12,-168 121.12,-168 115.12,-168 109.12,-162 109.12,-156 109.12,-156 109.12,-131 109.12,-131 109.12,-125 115.12,-119 121.12,-119\"/>\n<text text-anchor=\"middle\" x=\"155\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77845)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"109.12,-143.5 200.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"155\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1000</text>\n</g>\n<!-- 77853 -->\n<g id=\"node2\" class=\"node\">\n<title>77853</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M112.88,-16.5C112.88,-16.5 197.12,-16.5 197.12,-16.5 203.12,-16.5 209.12,-22.5 209.12,-28.5 209.12,-28.5 209.12,-53.5 209.12,-53.5 209.12,-59.5 203.12,-65.5 197.12,-65.5 197.12,-65.5 112.88,-65.5 112.88,-65.5 106.88,-65.5 100.88,-59.5 100.88,-53.5 100.88,-53.5 100.88,-28.5 100.88,-28.5 100.88,-22.5 106.88,-16.5 112.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"155\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77853)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"100.88,-41 209.12,-41\"/>\n<text text-anchor=\"middle\" x=\"155\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77845&#45;&gt;77853 -->\n<g id=\"edge1\" class=\"edge\">\n<title>77845&#45;&gt;77853</title>\n<path fill=\"none\" stroke=\"black\" d=\"M155,-119.19C155,-106.38 155,-90.25 155,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"158.5,-76.18 155,-66.18 151.5,-76.18 158.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"164\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"318pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 318.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 314,-213 314,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 302,-201 302,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"155\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: d38a3d14&#45;1f76&#45;420b&#45;8f35&#45;934c2bf82eb7</text>\\n</g>\\n<!-- 77845 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77845</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M121.12,-119C121.12,-119 188.88,-119 188.88,-119 194.88,-119 200.88,-125 200.88,-131 200.88,-131 200.88,-156 200.88,-156 200.88,-162 194.88,-168 188.88,-168 188.88,-168 121.12,-168 121.12,-168 115.12,-168 109.12,-162 109.12,-156 109.12,-156 109.12,-131 109.12,-131 109.12,-125 115.12,-119 121.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"155\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77845)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"109.12,-143.5 200.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"155\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77853 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77853</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M112.88,-16.5C112.88,-16.5 197.12,-16.5 197.12,-16.5 203.12,-16.5 209.12,-22.5 209.12,-28.5 209.12,-28.5 209.12,-53.5 209.12,-53.5 209.12,-59.5 203.12,-65.5 197.12,-65.5 197.12,-65.5 112.88,-65.5 112.88,-65.5 106.88,-65.5 100.88,-59.5 100.88,-53.5 100.88,-53.5 100.88,-28.5 100.88,-28.5 100.88,-22.5 106.88,-16.5 112.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"155\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77853)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"100.88,-41 209.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"155\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77845&#45;&gt;77853 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77845&#45;&gt;77853</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M155,-119.19C155,-106.38 155,-90.25 155,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"158.5,-76.18 155,-66.18 151.5,-76.18 158.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"164\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"}"},{"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"310pt\" height=\"217pt\"\n viewBox=\"0.00 0.00 310.00 217.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 213)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-213 306,-213 306,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" stroke-dasharray=\"1,5\" points=\"8,-8 8,-201 294,-201 294,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"151\" y=\"-183.7\" font-family=\"Times,serif\" font-size=\"14.00\">GRAPH: fa81c4dd&#45;8ff8&#45;4bdc&#45;bbe9&#45;0b4ffb82cf18</text>\n</g>\n<!-- 77847 -->\n<g id=\"node1\" class=\"node\">\n<title>77847</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M117.12,-119C117.12,-119 184.88,-119 184.88,-119 190.88,-119 196.88,-125 196.88,-131 196.88,-131 196.88,-156 196.88,-156 196.88,-162 190.88,-168 184.88,-168 184.88,-168 117.12,-168 117.12,-168 111.12,-168 105.12,-162 105.12,-156 105.12,-156 105.12,-131 105.12,-131 105.12,-125 111.12,-119 117.12,-119\"/>\n<text text-anchor=\"middle\" x=\"151\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77847)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"105.12,-143.5 196.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"151\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1000</text>\n</g>\n<!-- 77856 -->\n<g id=\"node2\" class=\"node\">\n<title>77856</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M108.88,-16.5C108.88,-16.5 193.12,-16.5 193.12,-16.5 199.12,-16.5 205.12,-22.5 205.12,-28.5 205.12,-28.5 205.12,-53.5 205.12,-53.5 205.12,-59.5 199.12,-65.5 193.12,-65.5 193.12,-65.5 108.88,-65.5 108.88,-65.5 102.88,-65.5 96.88,-59.5 96.88,-53.5 96.88,-53.5 96.88,-28.5 96.88,-28.5 96.88,-22.5 102.88,-16.5 108.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"151\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77856)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"96.88,-41 205.12,-41\"/>\n<text text-anchor=\"middle\" x=\"151\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77847&#45;&gt;77856 -->\n<g id=\"edge1\" class=\"edge\">\n<title>77847&#45;&gt;77856</title>\n<path fill=\"none\" stroke=\"black\" d=\"M151,-119.19C151,-106.38 151,-90.25 151,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"154.5,-76.18 151,-66.18 147.5,-76.18 154.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"160\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"310pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 310.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 306,-213 306,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 294,-201 294,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"151\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: fa81c4dd&#45;8ff8&#45;4bdc&#45;bbe9&#45;0b4ffb82cf18</text>\\n</g>\\n<!-- 77847 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77847</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M117.12,-119C117.12,-119 184.88,-119 184.88,-119 190.88,-119 196.88,-125 196.88,-131 196.88,-131 196.88,-156 196.88,-156 196.88,-162 190.88,-168 184.88,-168 184.88,-168 117.12,-168 117.12,-168 111.12,-168 105.12,-162 105.12,-156 105.12,-156 105.12,-131 105.12,-131 105.12,-125 111.12,-119 117.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"151\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77847)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"105.12,-143.5 196.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"151\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77856 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77856</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M108.88,-16.5C108.88,-16.5 193.12,-16.5 193.12,-16.5 199.12,-16.5 205.12,-22.5 205.12,-28.5 205.12,-28.5 205.12,-53.5 205.12,-53.5 205.12,-59.5 199.12,-65.5 193.12,-65.5 193.12,-65.5 108.88,-65.5 108.88,-65.5 102.88,-65.5 96.88,-59.5 96.88,-53.5 96.88,-53.5 96.88,-28.5 96.88,-28.5 96.88,-22.5 102.88,-16.5 108.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"151\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77856)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"96.88,-41 205.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"151\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77847&#45;&gt;77856 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77847&#45;&gt;77856</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M151,-119.19C151,-106.38 151,-90.25 151,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"154.5,-76.18 151,-66.18 147.5,-76.18 154.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"160\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"}"},{"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"317pt\" height=\"217pt\"\n viewBox=\"0.00 0.00 317.00 217.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 213)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-213 313,-213 313,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" stroke-dasharray=\"1,5\" points=\"8,-8 8,-201 301,-201 301,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"154.5\" y=\"-183.7\" font-family=\"Times,serif\" font-size=\"14.00\">GRAPH: 8d8f2957&#45;80fb&#45;4820&#45;946b&#45;9c1a6f191a6a</text>\n</g>\n<!-- 77849 -->\n<g id=\"node1\" class=\"node\">\n<title>77849</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M120.12,-119C120.12,-119 187.88,-119 187.88,-119 193.88,-119 199.88,-125 199.88,-131 199.88,-131 199.88,-156 199.88,-156 199.88,-162 193.88,-168 187.88,-168 187.88,-168 120.12,-168 120.12,-168 114.12,-168 108.12,-162 108.12,-156 108.12,-156 108.12,-131 108.12,-131 108.12,-125 114.12,-119 120.12,-119\"/>\n<text text-anchor=\"middle\" x=\"154\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77849)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"108.12,-143.5 199.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"154\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1000</text>\n</g>\n<!-- 77859 -->\n<g id=\"node2\" class=\"node\">\n<title>77859</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M111.88,-16.5C111.88,-16.5 196.12,-16.5 196.12,-16.5 202.12,-16.5 208.12,-22.5 208.12,-28.5 208.12,-28.5 208.12,-53.5 208.12,-53.5 208.12,-59.5 202.12,-65.5 196.12,-65.5 196.12,-65.5 111.88,-65.5 111.88,-65.5 105.88,-65.5 99.88,-59.5 99.88,-53.5 99.88,-53.5 99.88,-28.5 99.88,-28.5 99.88,-22.5 105.88,-16.5 111.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"154\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77859)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"99.88,-41 208.12,-41\"/>\n<text text-anchor=\"middle\" x=\"154\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77849&#45;&gt;77859 -->\n<g id=\"edge1\" class=\"edge\">\n<title>77849&#45;&gt;77859</title>\n<path fill=\"none\" stroke=\"black\" d=\"M154,-119.19C154,-106.38 154,-90.25 154,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"157.5,-76.18 154,-66.18 150.5,-76.18 157.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"163\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"317pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 317.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 313,-213 313,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 301,-201 301,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"154.5\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: 8d8f2957&#45;80fb&#45;4820&#45;946b&#45;9c1a6f191a6a</text>\\n</g>\\n<!-- 77849 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77849</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M120.12,-119C120.12,-119 187.88,-119 187.88,-119 193.88,-119 199.88,-125 199.88,-131 199.88,-131 199.88,-156 199.88,-156 199.88,-162 193.88,-168 187.88,-168 187.88,-168 120.12,-168 120.12,-168 114.12,-168 108.12,-162 108.12,-156 108.12,-156 108.12,-131 108.12,-131 108.12,-125 114.12,-119 120.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"154\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77849)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"108.12,-143.5 199.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"154\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77859 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77859</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M111.88,-16.5C111.88,-16.5 196.12,-16.5 196.12,-16.5 202.12,-16.5 208.12,-22.5 208.12,-28.5 208.12,-28.5 208.12,-53.5 208.12,-53.5 208.12,-59.5 202.12,-65.5 196.12,-65.5 196.12,-65.5 111.88,-65.5 111.88,-65.5 105.88,-65.5 99.88,-59.5 99.88,-53.5 99.88,-53.5 99.88,-28.5 99.88,-28.5 99.88,-22.5 105.88,-16.5 111.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"154\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77859)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"99.88,-41 208.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"154\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77849&#45;&gt;77859 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77849&#45;&gt;77859</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M154,-119.19C154,-106.38 154,-90.25 154,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"157.5,-76.18 154,-66.18 150.5,-76.18 157.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"163\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"}"},{"type":"html","content":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"322pt\" height=\"217pt\"\n viewBox=\"0.00 0.00 322.00 217.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 213)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"none\" points=\"-4,4 -4,-213 318,-213 318,4 -4,4\"/>\n<g id=\"clust1\" class=\"cluster\">\n<title>cluster0</title>\n<polygon fill=\"none\" stroke=\"black\" stroke-dasharray=\"1,5\" points=\"8,-8 8,-201 306,-201 306,-8 8,-8\"/>\n<text text-anchor=\"middle\" x=\"157\" y=\"-183.7\" font-family=\"Times,serif\" font-size=\"14.00\">GRAPH: edbbec98&#45;a789&#45;4d22&#45;8d7d&#45;bedd155e5028</text>\n</g>\n<!-- 77851 -->\n<g id=\"node1\" class=\"node\">\n<title>77851</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M123.12,-119C123.12,-119 190.88,-119 190.88,-119 196.88,-119 202.88,-125 202.88,-131 202.88,-131 202.88,-156 202.88,-156 202.88,-162 196.88,-168 190.88,-168 190.88,-168 123.12,-168 123.12,-168 117.12,-168 111.12,-162 111.12,-156 111.12,-156 111.12,-131 111.12,-131 111.12,-125 117.12,-119 123.12,-119\"/>\n<text text-anchor=\"middle\" x=\"157\" y=\"-150.7\" font-family=\"Times,serif\" font-size=\"14.00\">:Crust(77851)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"111.12,-143.5 202.88,-143.5\"/>\n<text text-anchor=\"middle\" x=\"157\" y=\"-126.2\" font-family=\"Times,serif\" font-size=\"14.00\">order: 1000</text>\n</g>\n<!-- 77862 -->\n<g id=\"node2\" class=\"node\">\n<title>77862</title>\n<path fill=\"aliceblue\" stroke=\"black\" d=\"M114.88,-16.5C114.88,-16.5 199.12,-16.5 199.12,-16.5 205.12,-16.5 211.12,-22.5 211.12,-28.5 211.12,-28.5 211.12,-53.5 211.12,-53.5 211.12,-59.5 205.12,-65.5 199.12,-65.5 199.12,-65.5 114.88,-65.5 114.88,-65.5 108.88,-65.5 102.88,-59.5 102.88,-53.5 102.88,-53.5 102.88,-28.5 102.88,-28.5 102.88,-22.5 108.88,-16.5 114.88,-16.5\"/>\n<text text-anchor=\"middle\" x=\"157\" y=\"-48.2\" font-family=\"Times,serif\" font-size=\"14.00\">:Topping(77862)</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"102.88,-41 211.12,-41\"/>\n<text text-anchor=\"middle\" x=\"157\" y=\"-23.7\" font-family=\"Times,serif\" font-size=\"14.00\">kind: &#39;cheese&#39;</text>\n</g>\n<!-- 77851&#45;&gt;77862 -->\n<g id=\"edge1\" class=\"edge\">\n<title>77851&#45;&gt;77862</title>\n<path fill=\"none\" stroke=\"black\" d=\"M157,-119.19C157,-106.38 157,-90.25 157,-76.05\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"160.5,-76.18 157,-66.18 153.5,-76.18 160.5,-76.18\"/>\n<text text-anchor=\"middle\" x=\"166\" y=\"-87.2\" font-family=\"Times,serif\" font-size=\"14.00\">has</text>\n</g>\n</g>\n</svg>\n","value":"#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"322pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 322.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 318,-213 318,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 306,-201 306,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: edbbec98&#45;a789&#45;4d22&#45;8d7d&#45;bedd155e5028</text>\\n</g>\\n<!-- 77851 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77851</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M123.12,-119C123.12,-119 190.88,-119 190.88,-119 196.88,-119 202.88,-125 202.88,-131 202.88,-131 202.88,-156 202.88,-156 202.88,-162 196.88,-168 190.88,-168 190.88,-168 123.12,-168 123.12,-168 117.12,-168 111.12,-162 111.12,-156 111.12,-156 111.12,-131 111.12,-131 111.12,-125 117.12,-119 123.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77851)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"111.12,-143.5 202.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77862 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77862</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M114.88,-16.5C114.88,-16.5 199.12,-16.5 199.12,-16.5 205.12,-16.5 211.12,-22.5 211.12,-28.5 211.12,-28.5 211.12,-53.5 211.12,-53.5 211.12,-59.5 205.12,-65.5 199.12,-65.5 199.12,-65.5 114.88,-65.5 114.88,-65.5 108.88,-65.5 102.88,-59.5 102.88,-53.5 102.88,-53.5 102.88,-28.5 102.88,-28.5 102.88,-22.5 108.88,-16.5 114.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77862)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"102.88,-41 211.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77851&#45;&gt;77862 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77851&#45;&gt;77862</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M157,-119.19C157,-106.38 157,-90.25 157,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"160.5,-76.18 157,-66.18 153.5,-76.18 160.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"166\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"}"}],"value":"(#gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"318pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 318.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 314,-213 314,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 302,-201 302,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"155\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: d38a3d14&#45;1f76&#45;420b&#45;8f35&#45;934c2bf82eb7</text>\\n</g>\\n<!-- 77845 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77845</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M121.12,-119C121.12,-119 188.88,-119 188.88,-119 194.88,-119 200.88,-125 200.88,-131 200.88,-131 200.88,-156 200.88,-156 200.88,-162 194.88,-168 188.88,-168 188.88,-168 121.12,-168 121.12,-168 115.12,-168 109.12,-162 109.12,-156 109.12,-156 109.12,-131 109.12,-131 109.12,-125 115.12,-119 121.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"155\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77845)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"109.12,-143.5 200.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"155\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77853 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77853</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M112.88,-16.5C112.88,-16.5 197.12,-16.5 197.12,-16.5 203.12,-16.5 209.12,-22.5 209.12,-28.5 209.12,-28.5 209.12,-53.5 209.12,-53.5 209.12,-59.5 203.12,-65.5 197.12,-65.5 197.12,-65.5 112.88,-65.5 112.88,-65.5 106.88,-65.5 100.88,-59.5 100.88,-53.5 100.88,-53.5 100.88,-28.5 100.88,-28.5 100.88,-22.5 106.88,-16.5 112.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"155\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77853)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"100.88,-41 209.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"155\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77845&#45;&gt;77853 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77845&#45;&gt;77853</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M155,-119.19C155,-106.38 155,-90.25 155,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"158.5,-76.18 155,-66.18 151.5,-76.18 158.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"164\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"} #gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"310pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 310.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 306,-213 306,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 294,-201 294,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"151\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: fa81c4dd&#45;8ff8&#45;4bdc&#45;bbe9&#45;0b4ffb82cf18</text>\\n</g>\\n<!-- 77847 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77847</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M117.12,-119C117.12,-119 184.88,-119 184.88,-119 190.88,-119 196.88,-125 196.88,-131 196.88,-131 196.88,-156 196.88,-156 196.88,-162 190.88,-168 184.88,-168 184.88,-168 117.12,-168 117.12,-168 111.12,-168 105.12,-162 105.12,-156 105.12,-156 105.12,-131 105.12,-131 105.12,-125 111.12,-119 117.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"151\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77847)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"105.12,-143.5 196.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"151\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77856 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77856</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M108.88,-16.5C108.88,-16.5 193.12,-16.5 193.12,-16.5 199.12,-16.5 205.12,-22.5 205.12,-28.5 205.12,-28.5 205.12,-53.5 205.12,-53.5 205.12,-59.5 199.12,-65.5 193.12,-65.5 193.12,-65.5 108.88,-65.5 108.88,-65.5 102.88,-65.5 96.88,-59.5 96.88,-53.5 96.88,-53.5 96.88,-28.5 96.88,-28.5 96.88,-22.5 102.88,-16.5 108.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"151\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77856)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"96.88,-41 205.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"151\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77847&#45;&gt;77856 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77847&#45;&gt;77856</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M151,-119.19C151,-106.38 151,-90.25 151,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"154.5,-76.18 151,-66.18 147.5,-76.18 154.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"160\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"} #gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"317pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 317.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 313,-213 313,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 301,-201 301,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"154.5\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: 8d8f2957&#45;80fb&#45;4820&#45;946b&#45;9c1a6f191a6a</text>\\n</g>\\n<!-- 77849 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77849</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M120.12,-119C120.12,-119 187.88,-119 187.88,-119 193.88,-119 199.88,-125 199.88,-131 199.88,-131 199.88,-156 199.88,-156 199.88,-162 193.88,-168 187.88,-168 187.88,-168 120.12,-168 120.12,-168 114.12,-168 108.12,-162 108.12,-156 108.12,-156 108.12,-131 108.12,-131 108.12,-125 114.12,-119 120.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"154\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77849)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"108.12,-143.5 199.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"154\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77859 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77859</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M111.88,-16.5C111.88,-16.5 196.12,-16.5 196.12,-16.5 202.12,-16.5 208.12,-22.5 208.12,-28.5 208.12,-28.5 208.12,-53.5 208.12,-53.5 208.12,-59.5 202.12,-65.5 196.12,-65.5 196.12,-65.5 111.88,-65.5 111.88,-65.5 105.88,-65.5 99.88,-59.5 99.88,-53.5 99.88,-53.5 99.88,-28.5 99.88,-28.5 99.88,-22.5 105.88,-16.5 111.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"154\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77859)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"99.88,-41 208.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"154\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77849&#45;&gt;77859 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77849&#45;&gt;77859</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M154,-119.19C154,-106.38 154,-90.25 154,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"157.5,-76.18 154,-66.18 150.5,-76.18 157.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"163\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"} #gorilla_repl.html.HtmlView{:content \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<!DOCTYPE svg PUBLIC \\\"-//W3C//DTD SVG 1.1//EN\\\"\\n \\\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\\\">\\n<!-- Generated by graphviz version 8.0.5 (20230430.1635)\\n -->\\n<!-- Title: g Pages: 1 -->\\n<svg width=\\\"322pt\\\" height=\\\"217pt\\\"\\n viewBox=\\\"0.00 0.00 322.00 217.00\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\\n<g id=\\\"graph0\\\" class=\\\"graph\\\" transform=\\\"scale(1 1) rotate(0) translate(4 213)\\\">\\n<title>g</title>\\n<polygon fill=\\\"white\\\" stroke=\\\"none\\\" points=\\\"-4,4 -4,-213 318,-213 318,4 -4,4\\\"/>\\n<g id=\\\"clust1\\\" class=\\\"cluster\\\">\\n<title>cluster0</title>\\n<polygon fill=\\\"none\\\" stroke=\\\"black\\\" stroke-dasharray=\\\"1,5\\\" points=\\\"8,-8 8,-201 306,-201 306,-8 8,-8\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-183.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">GRAPH: edbbec98&#45;a789&#45;4d22&#45;8d7d&#45;bedd155e5028</text>\\n</g>\\n<!-- 77851 -->\\n<g id=\\\"node1\\\" class=\\\"node\\\">\\n<title>77851</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M123.12,-119C123.12,-119 190.88,-119 190.88,-119 196.88,-119 202.88,-125 202.88,-131 202.88,-131 202.88,-156 202.88,-156 202.88,-162 196.88,-168 190.88,-168 190.88,-168 123.12,-168 123.12,-168 117.12,-168 111.12,-162 111.12,-156 111.12,-156 111.12,-131 111.12,-131 111.12,-125 117.12,-119 123.12,-119\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-150.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Crust(77851)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"111.12,-143.5 202.88,-143.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-126.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">order: 1000</text>\\n</g>\\n<!-- 77862 -->\\n<g id=\\\"node2\\\" class=\\\"node\\\">\\n<title>77862</title>\\n<path fill=\\\"aliceblue\\\" stroke=\\\"black\\\" d=\\\"M114.88,-16.5C114.88,-16.5 199.12,-16.5 199.12,-16.5 205.12,-16.5 211.12,-22.5 211.12,-28.5 211.12,-28.5 211.12,-53.5 211.12,-53.5 211.12,-59.5 205.12,-65.5 199.12,-65.5 199.12,-65.5 114.88,-65.5 114.88,-65.5 108.88,-65.5 102.88,-59.5 102.88,-53.5 102.88,-53.5 102.88,-28.5 102.88,-28.5 102.88,-22.5 108.88,-16.5 114.88,-16.5\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-48.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">:Topping(77862)</text>\\n<polyline fill=\\\"none\\\" stroke=\\\"black\\\" points=\\\"102.88,-41 211.12,-41\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"157\\\" y=\\\"-23.7\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">kind: &#39;cheese&#39;</text>\\n</g>\\n<!-- 77851&#45;&gt;77862 -->\\n<g id=\\\"edge1\\\" class=\\\"edge\\\">\\n<title>77851&#45;&gt;77862</title>\\n<path fill=\\\"none\\\" stroke=\\\"black\\\" d=\\\"M157,-119.19C157,-106.38 157,-90.25 157,-76.05\\\"/>\\n<polygon fill=\\\"black\\\" stroke=\\\"black\\\" points=\\\"160.5,-76.18 157,-66.18 153.5,-76.18 160.5,-76.18\\\"/>\\n<text text-anchor=\\\"middle\\\" x=\\\"166\\\" y=\\\"-87.2\\\" font-family=\\\"Times,serif\\\" font-size=\\\"14.00\\\">has</text>\\n</g>\\n</g>\\n</svg>\\n\"})"}
;; <=

;; **
;;; #### Try Empty
;;; 
;;; Suppose that instead of attempting to recover from a failure, we simply want to start over fresh. This would be similar to cleaning our entire kitchen if the pizzeria has one duplicate order (admittedly, a somewhat extreme response). We can use the `try-empty` as below. If a unit fails this results in an empty GRAPE being returned.
;; **

;; @@
(-> 
  (newgrape)
  (cheese-pizza 1000) ;; create a pizza with order 1000
  (try-empty (cheese-pizza 1000)) ;; should fail
  view)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[],"value":"()"}
;; <=

;; **
;;; ## The Unit Execution "Stack"
;;; 
;;; Unit executions are tracked in a "stack" data structure that holds of a fixed (configurable) number of recent unit executions. All unit executions are assigned a UUID at run-time that uniquely idenifies them in the stack. 
;;; 
;;; Unit's that are executed from the "top-level", i.e., are not called as part of other units, have their "stack frame" added directly to the stack. Units that are executed from within the graph program of another unit are nested inside each other's stack frames to make a call stack, similar to how many conventional programming languages represent nested function calls.
;; **

;; **
;;; ### Viewing the Current Stack
;;; 
;;; We can retrieve the current stack using: 
;; **

;; @@
(unit-stack)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-7238d425-f25a-4930-8392-8dbf936a8d14&quot;</span>","value":"\"stack-7238d425-f25a-4930-8392-8dbf936a8d14\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}"}],"value":"[\"stack-7238d425-f25a-4930-8392-8dbf936a8d14\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-2d765eec-1cb8-45b0-9ac7-af4365379f33&quot;</span>","value":"\"stack-2d765eec-1cb8-45b0-9ac7-af4365379f33\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1]"}],"value":"[:params [1]]"}],"value":"{:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}"}],"value":"[\"stack-2d765eec-1cb8-45b0-9ac7-af4365379f33\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-ea7dd31a-86c8-4b83-aea5-c79e81acb40e&quot;</span>","value":"\"stack-ea7dd31a-86c8-4b83-aea5-c79e81acb40e\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>false</span>","value":"false"}],"value":"[:pre false]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name cheese-pizza, :pre false, :post true, :stack {}, :params [1000]}"}],"value":"[\"stack-ea7dd31a-86c8-4b83-aea5-c79e81acb40e\" {:name cheese-pizza, :pre false, :post true, :stack {}, :params [1000]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-3cac4e65-e938-4302-9c0f-c2163075c0cf&quot;</span>","value":"\"stack-3cac4e65-e938-4302-9c0f-c2163075c0cf\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>false</span>","value":"false"}],"value":"[:pre false]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:post nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}"}],"value":"[\"stack-3cac4e65-e938-4302-9c0f-c2163075c0cf\" {:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-d592835d-b5d0-48cb-a065-a3bc5d36c26c&quot;</span>","value":"\"stack-d592835d-b5d0-48cb-a065-a3bc5d36c26c\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>many-cheese-pizzas</span>","value":"many-cheese-pizzas"}],"value":"[:name many-cheese-pizzas]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>3</span>","value":"3"},{"type":"html","content":"<span class='clj-long'>1234</span>","value":"1234"}],"value":"[3 1234]"}],"value":"[:params [3 1234]]"}],"value":"{:name many-cheese-pizzas, :pre true, :post true, :stack {}, :params [3 1234]}"}],"value":"[\"stack-d592835d-b5d0-48cb-a065-a3bc5d36c26c\" {:name many-cheese-pizzas, :pre true, :post true, :stack {}, :params [3 1234]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-9f4d53f7-0430-4e74-8782-24eecd6eec62&quot;</span>","value":"\"stack-9f4d53f7-0430-4e74-8782-24eecd6eec62\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}"}],"value":"[\"stack-9f4d53f7-0430-4e74-8782-24eecd6eec62\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-d14fa981-b530-4446-9464-7c22790ec1a0&quot;</span>","value":"\"stack-d14fa981-b530-4446-9464-7c22790ec1a0\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>false</span>","value":"false"}],"value":"[:pre false]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:post nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}"}],"value":"[\"stack-d14fa981-b530-4446-9464-7c22790ec1a0\" {:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-07cbb48c-cd0a-47fe-a302-ee8ec2db36c8&quot;</span>","value":"\"stack-07cbb48c-cd0a-47fe-a302-ee8ec2db36c8\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>veggie-pizza</span>","value":"veggie-pizza"}],"value":"[:name veggie-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-a31ef8b3-e8a1-4a6f-8474-9d4f74f7833f&quot;</span>","value":"\"stack-a31ef8b3-e8a1-4a6f-8474-9d4f74f7833f\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1]"}],"value":"[:params [1]]"}],"value":"{:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}"}],"value":"[\"stack-a31ef8b3-e8a1-4a6f-8474-9d4f74f7833f\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}]"}],"value":"{\"stack-a31ef8b3-e8a1-4a6f-8474-9d4f74f7833f\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}}"}],"value":"[:stack {\"stack-a31ef8b3-e8a1-4a6f-8474-9d4f74f7833f\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1]"}],"value":"[:params [1]]"}],"value":"{:name veggie-pizza, :pre true, :post true, :stack {\"stack-a31ef8b3-e8a1-4a6f-8474-9d4f74f7833f\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}}, :params [1]}"}],"value":"[\"stack-07cbb48c-cd0a-47fe-a302-ee8ec2db36c8\" {:name veggie-pizza, :pre true, :post true, :stack {\"stack-a31ef8b3-e8a1-4a6f-8474-9d4f74f7833f\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}}, :params [1]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-7779bc64-2f7b-4cc8-8a63-264a674e2e8b&quot;</span>","value":"\"stack-7779bc64-2f7b-4cc8-8a63-264a674e2e8b\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}"}],"value":"[\"stack-7779bc64-2f7b-4cc8-8a63-264a674e2e8b\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-cd61a2dd-dcc3-4dc2-8a3e-1a6d2f601dfe&quot;</span>","value":"\"stack-cd61a2dd-dcc3-4dc2-8a3e-1a6d2f601dfe\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}"}],"value":"[\"stack-cd61a2dd-dcc3-4dc2-8a3e-1a6d2f601dfe\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-b515236a-b668-4ccd-9228-945ec05cd06a&quot;</span>","value":"\"stack-b515236a-b668-4ccd-9228-945ec05cd06a\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>veggie-pizza</span>","value":"veggie-pizza"}],"value":"[:name veggie-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:post nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-0ed8d698-893b-4cde-bc4f-77c26f70d499&quot;</span>","value":"\"stack-0ed8d698-893b-4cde-bc4f-77c26f70d499\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>false</span>","value":"false"}],"value":"[:pre false]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:post nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}"}],"value":"[\"stack-0ed8d698-893b-4cde-bc4f-77c26f70d499\" {:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}]"}],"value":"{\"stack-0ed8d698-893b-4cde-bc4f-77c26f70d499\" {:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}}"}],"value":"[:stack {\"stack-0ed8d698-893b-4cde-bc4f-77c26f70d499\" {:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name veggie-pizza, :pre true, :post nil, :stack {\"stack-0ed8d698-893b-4cde-bc4f-77c26f70d499\" {:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}}, :params [1000]}"}],"value":"[\"stack-b515236a-b668-4ccd-9228-945ec05cd06a\" {:name veggie-pizza, :pre true, :post nil, :stack {\"stack-0ed8d698-893b-4cde-bc4f-77c26f70d499\" {:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}}, :params [1000]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:last-frame</span>","value":":last-frame"},{"type":"html","content":"<span class='clj-string'>&quot;stack-854b63b1-564e-4e98-90ab-0923a8ccd4a7&quot;</span>","value":"\"stack-854b63b1-564e-4e98-90ab-0923a8ccd4a7\""}],"value":"[:last-frame \"stack-854b63b1-564e-4e98-90ab-0923a8ccd4a7\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-7c222c6e-82a6-4195-830e-bf477ecffac7&quot;</span>","value":"\"stack-7c222c6e-82a6-4195-830e-bf477ecffac7\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}"}],"value":"[\"stack-7c222c6e-82a6-4195-830e-bf477ecffac7\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-b6c5346f-459d-4c70-b668-7e559d0dca33&quot;</span>","value":"\"stack-b6c5346f-459d-4c70-b668-7e559d0dca33\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}"}],"value":"[\"stack-b6c5346f-459d-4c70-b668-7e559d0dca33\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-854b63b1-564e-4e98-90ab-0923a8ccd4a7&quot;</span>","value":"\"stack-854b63b1-564e-4e98-90ab-0923a8ccd4a7\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>false</span>","value":"false"}],"value":"[:pre false]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:post nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}"}],"value":"[\"stack-854b63b1-564e-4e98-90ab-0923a8ccd4a7\" {:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-8b765238-797c-4797-bd7c-024365c14df2&quot;</span>","value":"\"stack-8b765238-797c-4797-bd7c-024365c14df2\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1000</span>","value":"1000"}],"value":"[1000]"}],"value":"[:params [1000]]"}],"value":"{:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}"}],"value":"[\"stack-8b765238-797c-4797-bd7c-024365c14df2\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;stack-6e69ac55-f8fe-4b81-bb24-2dd15a784b83&quot;</span>","value":"\"stack-6e69ac55-f8fe-4b81-bb24-2dd15a784b83\""},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-symbol'>cheese-pizza</span>","value":"cheese-pizza"}],"value":"[:name cheese-pizza]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:pre true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:post true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:stack</span>","value":":stack"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:stack {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"[1]"}],"value":"[:params [1]]"}],"value":"{:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}"}],"value":"[\"stack-6e69ac55-f8fe-4b81-bb24-2dd15a784b83\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}]"}],"value":"{\"stack-7238d425-f25a-4930-8392-8dbf936a8d14\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}, \"stack-2d765eec-1cb8-45b0-9ac7-af4365379f33\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}, \"stack-ea7dd31a-86c8-4b83-aea5-c79e81acb40e\" {:name cheese-pizza, :pre false, :post true, :stack {}, :params [1000]}, \"stack-3cac4e65-e938-4302-9c0f-c2163075c0cf\" {:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}, \"stack-d592835d-b5d0-48cb-a065-a3bc5d36c26c\" {:name many-cheese-pizzas, :pre true, :post true, :stack {}, :params [3 1234]}, \"stack-9f4d53f7-0430-4e74-8782-24eecd6eec62\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}, \"stack-d14fa981-b530-4446-9464-7c22790ec1a0\" {:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}, \"stack-07cbb48c-cd0a-47fe-a302-ee8ec2db36c8\" {:name veggie-pizza, :pre true, :post true, :stack {\"stack-a31ef8b3-e8a1-4a6f-8474-9d4f74f7833f\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}}, :params [1]}, \"stack-7779bc64-2f7b-4cc8-8a63-264a674e2e8b\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}, \"stack-cd61a2dd-dcc3-4dc2-8a3e-1a6d2f601dfe\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}, \"stack-b515236a-b668-4ccd-9228-945ec05cd06a\" {:name veggie-pizza, :pre true, :post nil, :stack {\"stack-0ed8d698-893b-4cde-bc4f-77c26f70d499\" {:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}}, :params [1000]}, :last-frame \"stack-854b63b1-564e-4e98-90ab-0923a8ccd4a7\", \"stack-7c222c6e-82a6-4195-830e-bf477ecffac7\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}, \"stack-b6c5346f-459d-4c70-b668-7e559d0dca33\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}, \"stack-854b63b1-564e-4e98-90ab-0923a8ccd4a7\" {:name cheese-pizza, :pre false, :post nil, :stack {}, :params [1000]}, \"stack-8b765238-797c-4797-bd7c-024365c14df2\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1000]}, \"stack-6e69ac55-f8fe-4b81-bb24-2dd15a784b83\" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}}"}
;; <=

;; **
;;; But that's a bit messy, so there is a helper method to pretty print the stack
;; **

;; @@
(print-unit-stack)
;; @@
;; ->
;;; {&quot;stack-7238d425-f25a-4930-8392-8dbf936a8d14&quot;
;;;  {:name cheese-pizza,
;;;   :pre true,
;;;   :post true,
;;;   :stack {},
;;;   :params [1000]},
;;;  &quot;stack-2d765eec-1cb8-45b0-9ac7-af4365379f33&quot;
;;;  {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]},
;;;  &quot;stack-ea7dd31a-86c8-4b83-aea5-c79e81acb40e&quot;
;;;  {:name cheese-pizza,
;;;   :pre false,
;;;   :post true,
;;;   :stack {},
;;;   :params [1000]},
;;;  &quot;stack-3cac4e65-e938-4302-9c0f-c2163075c0cf&quot;
;;;  {:name cheese-pizza,
;;;   :pre false,
;;;   :post nil,
;;;   :stack {},
;;;   :params [1000]},
;;;  &quot;stack-d592835d-b5d0-48cb-a065-a3bc5d36c26c&quot;
;;;  {:name many-cheese-pizzas,
;;;   :pre true,
;;;   :post true,
;;;   :stack {},
;;;   :params [3 1234]},
;;;  &quot;stack-9f4d53f7-0430-4e74-8782-24eecd6eec62&quot;
;;;  {:name cheese-pizza,
;;;   :pre true,
;;;   :post true,
;;;   :stack {},
;;;   :params [1000]},
;;;  &quot;stack-d14fa981-b530-4446-9464-7c22790ec1a0&quot;
;;;  {:name cheese-pizza,
;;;   :pre false,
;;;   :post nil,
;;;   :stack {},
;;;   :params [1000]},
;;;  &quot;stack-07cbb48c-cd0a-47fe-a302-ee8ec2db36c8&quot;
;;;  {:name veggie-pizza,
;;;   :pre true,
;;;   :post true,
;;;   :stack
;;;   {&quot;stack-a31ef8b3-e8a1-4a6f-8474-9d4f74f7833f&quot;
;;;    {:name cheese-pizza,
;;;     :pre true,
;;;     :post true,
;;;     :stack {},
;;;     :params [1]}},
;;;   :params [1]},
;;;  &quot;stack-7779bc64-2f7b-4cc8-8a63-264a674e2e8b&quot;
;;;  {:name cheese-pizza,
;;;   :pre true,
;;;   :post true,
;;;   :stack {},
;;;   :params [1000]},
;;;  &quot;stack-cd61a2dd-dcc3-4dc2-8a3e-1a6d2f601dfe&quot;
;;;  {:name cheese-pizza,
;;;   :pre true,
;;;   :post true,
;;;   :stack {},
;;;   :params [1000]},
;;;  &quot;stack-b515236a-b668-4ccd-9228-945ec05cd06a&quot;
;;;  {:name veggie-pizza,
;;;   :pre true,
;;;   :post nil,
;;;   :stack
;;;   {&quot;stack-0ed8d698-893b-4cde-bc4f-77c26f70d499&quot;
;;;    {:name cheese-pizza,
;;;     :pre false,
;;;     :post nil,
;;;     :stack {},
;;;     :params [1000]}},
;;;   :params [1000]},
;;;  :last-frame &quot;stack-854b63b1-564e-4e98-90ab-0923a8ccd4a7&quot;,
;;;  &quot;stack-7c222c6e-82a6-4195-830e-bf477ecffac7&quot;
;;;  {:name cheese-pizza,
;;;   :pre true,
;;;   :post true,
;;;   :stack {},
;;;   :params [1000]},
;;;  &quot;stack-b6c5346f-459d-4c70-b668-7e559d0dca33&quot;
;;;  {:name cheese-pizza,
;;;   :pre true,
;;;   :post true,
;;;   :stack {},
;;;   :params [1000]},
;;;  &quot;stack-854b63b1-564e-4e98-90ab-0923a8ccd4a7&quot;
;;;  {:name cheese-pizza,
;;;   :pre false,
;;;   :post nil,
;;;   :stack {},
;;;   :params [1000]},
;;;  &quot;stack-8b765238-797c-4797-bd7c-024365c14df2&quot;
;;;  {:name cheese-pizza,
;;;   :pre true,
;;;   :post true,
;;;   :stack {},
;;;   :params [1000]},
;;;  &quot;stack-6e69ac55-f8fe-4b81-bb24-2dd15a784b83&quot;
;;;  {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}}
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; There is quite a lot in the stack right now due to all of the previous unit executions. Let's clear it.
;; **

;; @@
(reset-unit-stack)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}
;; <=

;; **
;;; Now let's make one unit execution and inspect the result on the stack.
;; **

;; @@
(-> (newgrape) (cheese-pizza 1) view)

(print-unit-stack)
;; @@
;; ->
;;; {&quot;stack-a5f9b45b-7834-4096-a2d3-c797099e7f39&quot;
;;;  {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]},
;;;  :last-frame &quot;stack-a5f9b45b-7834-4096-a2d3-c797099e7f39&quot;}
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; We can see the stack now has one entry for our `cheese-pizza` unit's execution:
;;; 
;;; ```clojure
;;; {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]}
;;; ```
;;; 
;;; In the stack frame, can see that both the pre- and post-condition succeeded (these are evaluated and stored regardless of the failure policy, as long as checking is enabled). We can also see that this unit was executed with the value `1` as a parameter. Finally, since `cheese-pizza` does not invoke any other units, its internal stack is empty.
;;; 
;;; But, our `veggie-pizza` unit does have a nested unit! Let's try that and see how stack frames become nested.
;; **

;; @@
(-> (newgrape) (veggie-pizza 2) view)

(print-unit-stack)
;; @@
;; ->
;;; {&quot;stack-a5f9b45b-7834-4096-a2d3-c797099e7f39&quot;
;;;  {:name cheese-pizza, :pre true, :post true, :stack {}, :params [1]},
;;;  :last-frame &quot;stack-fc861dcd-c9db-4633-9235-2b392db8c1c3&quot;,
;;;  &quot;stack-fc861dcd-c9db-4633-9235-2b392db8c1c3&quot;
;;;  {:name veggie-pizza,
;;;   :pre true,
;;;   :post true,
;;;   :stack
;;;   {&quot;stack-4410044a-f52c-429d-a575-493418fa37ad&quot;
;;;    {:name cheese-pizza,
;;;     :pre true,
;;;     :post true,
;;;     :stack {},
;;;     :params [2]}},
;;;   :params [2]}}
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; The veggie-pizza frame looks something like: 
;;; 
;;; ```
;;; {:name veggie-pizza, :pre true, :post true, :params [2], 
;;;  :stack {"stack-XXXX" {:name cheese-pizza, :pre true, :post true, :stack {}, :params [2]}}}
;;; ```
;;; 
;;; Notice how the execution of the `cheese-pizza` is recorded as part of the stack within `veggie-pizza` frame.
;; **

;; **
;;; ### Using the Stack to Check Pre- and Post-Conditions
;;; 
;;; The pre- and post-condition results from most recent *top-level* stack frame can be returned using the `(pre?)` and `(post?)` functions. This can be useful for controlling the flow of graph programs if unit failure is disabled. Since `veggie-pizza` was the unit we executed, we can check the conditions for it:
;; **

;; @@
(println (pre?) (post?))
;; @@
;; ->
;;; true true
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; And if a unit fails, we can still check the results.
;; **

;; @@
(set-unit-failure-policy false)

(-> (newgrape) (cheese-pizza 1000) (cheese-pizza 1000) view)

(println "pre-condition" (pre?))
(println "post-condition" (post?))
;; @@
;; ->
;;; pre-condition false
;;; post-condition true
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; ## Unit Documentation
;;; 
;;; It is generally a good practice to write a short human-readable description of a unit's behaviour, i.e., documentation. This can be provided using the `(doc ...)` function as part of the unit's definition.
;; **

;; @@
(unit cheese-pizza [oid]
      (doc "Creates a new cheese pizza for the order identified by parameter oid.")
      (pre (forall-graphs? (order-exists?- oid)))
      (post (forall-graphs? (order-exists? oid)))
      (prog
       (crust oid) 
       (add-topping oid "cheese")))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;energized-valley/cheese-pizza</span>","value":"#'energized-valley/cheese-pizza"}
;; <=

;; **
;;; We can look up the documentation of a unit using a special function called `<unitname>-doc`. Which prints the documentation string.
;; **

;; @@
(cheese-pizza-doc)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-string'>&quot;Creates a new cheese pizza for the order identified by parameter oid.&quot;</span>","value":"\"Creates a new cheese pizza for the order identified by parameter oid.\""}
;; <=

;; @@
(veggie-pizza-doc)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; ## Looking Up Unit Details
;;; 
;;; Like the `<unitname>-doc` function, similar functions exist to view other aspects of the unit's definition.
;;; 
;;; If pre- and post-conditions are not specified, then GrapeVine substitutes them with functions that return, i.e., the weakest condition.
;; **

;; @@
(cheese-pizza-pre)
(cheese-pizza-post)
(cheese-pizza-prog)
(cheese-pizza-params)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-symbol'>oid</span>","value":"oid"}],"value":"[oid]"}
;; <=

;; **
;;; And we can get all of the unit's information in one data structure using `<unitname>-show`.
;; **

;; @@
(cheese-pizza-show)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:doc</span>","value":":doc"},{"type":"html","content":"<span class='clj-string'>&quot;Creates a new cheese pizza for the order identified by parameter oid.&quot;</span>","value":"\"Creates a new cheese pizza for the order identified by parameter oid.\""}],"value":"[:doc \"Creates a new cheese pizza for the order identified by parameter oid.\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-symbol'>oid</span>","value":"oid"}],"value":"[oid]"}],"value":"[:params [oid]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:pre</span>","value":":pre"},{"type":"list-like","open":"<span class='clj-list'>(</span>","close":"<span class='clj-list'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-list'>(</span>","close":"<span class='clj-list'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-symbol'>forall-graphs?</span>","value":"forall-graphs?"},{"type":"list-like","open":"<span class='clj-list'>(</span>","close":"<span class='clj-list'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-symbol'>order-exists?-</span>","value":"order-exists?-"},{"type":"html","content":"<span class='clj-symbol'>oid</span>","value":"oid"}],"value":"(order-exists?- oid)"}],"value":"(forall-graphs? (order-exists?- oid))"}],"value":"((forall-graphs? (order-exists?- oid)))"}],"value":"[:pre ((forall-graphs? (order-exists?- oid)))]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:post</span>","value":":post"},{"type":"list-like","open":"<span class='clj-list'>(</span>","close":"<span class='clj-list'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-list'>(</span>","close":"<span class='clj-list'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-symbol'>forall-graphs?</span>","value":"forall-graphs?"},{"type":"list-like","open":"<span class='clj-list'>(</span>","close":"<span class='clj-list'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-symbol'>order-exists?</span>","value":"order-exists?"},{"type":"html","content":"<span class='clj-symbol'>oid</span>","value":"oid"}],"value":"(order-exists? oid)"}],"value":"(forall-graphs? (order-exists? oid))"}],"value":"((forall-graphs? (order-exists? oid)))"}],"value":"[:post ((forall-graphs? (order-exists? oid)))]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:prog</span>","value":":prog"},{"type":"list-like","open":"<span class='clj-list'>(</span>","close":"<span class='clj-list'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-list'>(</span>","close":"<span class='clj-list'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-symbol'>crust</span>","value":"crust"},{"type":"html","content":"<span class='clj-symbol'>oid</span>","value":"oid"}],"value":"(crust oid)"},{"type":"list-like","open":"<span class='clj-list'>(</span>","close":"<span class='clj-list'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-symbol'>add-topping</span>","value":"add-topping"},{"type":"html","content":"<span class='clj-symbol'>oid</span>","value":"oid"},{"type":"html","content":"<span class='clj-string'>&quot;cheese&quot;</span>","value":"\"cheese\""}],"value":"(add-topping oid \"cheese\")"}],"value":"((crust oid) (add-topping oid \"cheese\"))"}],"value":"[:prog ((crust oid) (add-topping oid \"cheese\"))]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:exec</span>","value":":exec"},{"type":"html","content":"<span class='clj-unkown'>#function[energized-valley/eval17186/--exec-unit--17187]</span>","value":"#function[energized-valley/eval17186/--exec-unit--17187]"}],"value":"[:exec #function[energized-valley/eval17186/--exec-unit--17187]]"}],"value":"{:doc \"Creates a new cheese pizza for the order identified by parameter oid.\", :params [oid], :pre ((forall-graphs? (order-exists?- oid))), :post ((forall-graphs? (order-exists? oid))), :prog ((crust oid) (add-topping oid \"cheese\")), :exec #function[energized-valley/eval17186/--exec-unit--17187]}"}
;; <=

;; @@

;; @@
